"use strict";(self.webpackChunkmy_docsv_4=self.webpackChunkmy_docsv_4||[]).push([[8573],{3905:(e,n,t)=>{t.d(n,{Zo:()=>g,kt:()=>m});var i=t(67294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function p(e,n){if(null==e)return{};var t,i,r=function(e,n){if(null==e)return{};var t,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)t=a[i],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)t=a[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var o=i.createContext({}),s=function(e){var n=i.useContext(o),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},g=function(e){var n=s(e.components);return i.createElement(o.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return i.createElement(i.Fragment,{},n)}},c=i.forwardRef((function(e,n){var t=e.components,r=e.mdxType,a=e.originalType,o=e.parentName,g=p(e,["components","mdxType","originalType","parentName"]),c=s(t),m=r,d=c["".concat(o,".").concat(m)]||c[m]||u[m]||a;return t?i.createElement(d,l(l({ref:n},g),{},{components:t})):i.createElement(d,l({ref:n},g))}));function m(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var a=t.length,l=new Array(a);l[0]=c;var p={};for(var o in n)hasOwnProperty.call(n,o)&&(p[o]=n[o]);p.originalType=e,p.mdxType="string"==typeof e?e:r,l[1]=p;for(var s=2;s<a;s++)l[s]=t[s];return i.createElement.apply(null,l)}return i.createElement.apply(null,t)}c.displayName="MDXCreateElement"},64165:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>u,frontMatter:()=>a,metadata:()=>p,toc:()=>s});var i=t(87462),r=(t(67294),t(3905));const a={},l="Nginx \u7f16\u8bd1\u53ca\u5236\u4f5c\u5305",p={unversionedId:"LinuxBasics/Web-Servers/Nginx/Nginx \u7f16\u8bd1\u53ca\u5236\u4f5c\u5305",id:"LinuxBasics/Web-Servers/Nginx/Nginx \u7f16\u8bd1\u53ca\u5236\u4f5c\u5305",title:"Nginx \u7f16\u8bd1\u53ca\u5236\u4f5c\u5305",description:"Nginx\u7f16\u8bd1\u5b89\u88c5",source:"@site/docs/LinuxBasics/Web-Servers/Nginx/Nginx \u7f16\u8bd1\u53ca\u5236\u4f5c\u5305.md",sourceDirName:"LinuxBasics/Web-Servers/Nginx",slug:"/LinuxBasics/Web-Servers/Nginx/Nginx \u7f16\u8bd1\u53ca\u5236\u4f5c\u5305",permalink:"/docs/LinuxBasics/Web-Servers/Nginx/Nginx \u7f16\u8bd1\u53ca\u5236\u4f5c\u5305",draft:!1,editUrl:"https://github.com/AGou-ops/myDocsv4/edit/main/docs/LinuxBasics/Web-Servers/Nginx/Nginx \u7f16\u8bd1\u53ca\u5236\u4f5c\u5305.md",tags:[],version:"current",frontMatter:{},sidebar:"linuxBasics",previous:{title:"Nginx \u722c\u866b\u9650\u5236",permalink:"/docs/LinuxBasics/Web-Servers/Nginx/Nginx \u722c\u866b\u9650\u5236"},next:{title:"Nginx \u8d1f\u8f7d\u5747\u8861",permalink:"/docs/LinuxBasics/Web-Servers/Nginx/Nginx \u8d1f\u8f7d\u5747\u8861"}},o={},s=[{value:"Nginx\u7f16\u8bd1\u5b89\u88c5",id:"nginx\u7f16\u8bd1\u5b89\u88c5",level:2},{value:"Nginx\u81ea\u5b9a\u4e49RPM\u5305",id:"nginx\u81ea\u5b9a\u4e49rpm\u5305",level:2},{value:"Nginx\u7f16\u8bd1\u53c2\u6570",id:"nginx\u7f16\u8bd1\u53c2\u6570",level:2},{value:"\u53c2\u8003\u94fe\u63a5",id:"\u53c2\u8003\u94fe\u63a5",level:2}],g={toc:s};function u(e){let{components:n,...t}=e;return(0,r.kt)("wrapper",(0,i.Z)({},g,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"nginx-\u7f16\u8bd1\u53ca\u5236\u4f5c\u5305"},"Nginx \u7f16\u8bd1\u53ca\u5236\u4f5c\u5305"),(0,r.kt)("h2",{id:"nginx\u7f16\u8bd1\u5b89\u88c5"},"Nginx\u7f16\u8bd1\u5b89\u88c5"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u5b89\u88c5\u7f16\u8bd1\u73af\u5883")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'yum groupinstall "Development Tools" "Server Platform Development" -y\nyum install -y pcre-devel openssl-devel\n')),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"\u7f16\u8bd1\u8fc7\u7a0b(./configure --help)")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"./configure --prefix=/usr/share/nginx --sbin-path=/usr/sbin/nginx --modules-path=/usr/lib64/nginx/modules --conf-path=/etc/nginx/nginx.conf --error-log-path=/var/log/nginx/error.log --http-log-path=/var/log/nginx/access.log --http-client-body-temp-path=/var/lib/nginx/tmp/client_body --http-proxy-temp-path=/var/lib/nginx/tmp/proxy --http-fastcgi-temp-path=/var/lib/nginx/tmp/fastcgi --http-uwsgi-temp-path=/var/lib/nginx/tmp/uwsgi --http-scgi-temp-path=/var/lib/nginx/tmp/scgi --pid-path=/run/nginx.pid --lock-path=/run/lock/subsys/nginx --user=nginx --group=nginx --with-file-aio --with-ipv6 --with-http_ssl_module --with-http_v2_module --with-http_realip_module --with-stream_ssl_preread_module --with-http_addition_module --with-http_xslt_module=dynamic --with-http_image_filter_module=dynamic --with-http_sub_module --with-http_dav_module --with-http_flv_module --with-http_mp4_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_random_index_module --with-http_secure_link_module --with-http_degradation_module --with-http_slice_module --with-http_stub_status_module --with-http_perl_module=dynamic --with-http_auth_request_module --with-mail=dynamic --with-mail_ssl_module --with-pcre --with-pcre-jit --with-stream=dynamic --with-stream_ssl_module --with-google_perftools_module --with-debug --with-cc-opt='-O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -specs=/usr/lib/rpm/redhat/redhat-hardened-cc1 -m64 -mtune=generic' --with-ld-opt='-Wl,-z,relro -specs=/usr/lib/rpm/redhat/redhat-hardened-ld -Wl,-E'\n")),(0,r.kt)("p",null,"\u4ee5\u4e0a\u4e3aepel\u4ed3\u5e93\u4e2d\u9ed8\u8ba4\u7684\u9009\u9879,\u6309\u7167\u81ea\u8eab\u9700\u6c42\u8fdb\u884c\u6dfb\u52a0\u6216\u8005\u5220\u9664"),(0,r.kt)("p",null,"\u7f16\u8bd1\u5b89\u88c5:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"make && make install\n")),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},"Nginx\u7684Unit File(\u53c2\u8003epel\u4ed3\u5e93\u4e2d\u7684Unit File)")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@master ~]\\# cat /usr/lib/systemd/system/nginx.service\n[Unit]\nDescription=The nginx HTTP and reverse proxy server\nAfter=network.target remote-fs.target nss-lookup.target\n\n[Service]\nType=forking\nPIDFile=/run/nginx.pid\n# Nginx will fail to start if /run/nginx.pid already exists but has the wrong\n# SELinux context. This might happen when running `nginx -t` from the cmdline.\n# https://bugzilla.redhat.com/show_bug.cgi?id=1268621\nExecStartPre=/usr/bin/rm -f /run/nginx.pid\nExecStartPre=/usr/sbin/nginx -t\nExecStart=/usr/sbin/nginx\nExecReload=/bin/kill -s HUP $MAINPID\nKillSignal=SIGQUIT\nTimeoutStopSec=5\nKillMode=process\nPrivateTmp=true\n\n[Install]\nWantedBy=multi-user.target\n")),(0,r.kt)("h2",{id:"nginx\u81ea\u5b9a\u4e49rpm\u5305"},"Nginx\u81ea\u5b9a\u4e49RPM\u5305"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u4e0b\u8f7d\u5e76\u5b89\u88c5Nginx\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"src.rpm")," \u5305,\u4ee5CentOS 7 \u4e3a\u4f8b")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"wget http://nginx.org/packages/centos/7/SRPMS/nginx-1.16.1-1.el7.ngx.src.rpm\nrpm -ivh nginx-1.16.1-1.el7.ngx.src.rpm\n")),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"\u67e5\u770b\u5b89\u88c5\u751f\u6210\u7684",(0,r.kt)("inlineCode",{parentName:"li"},"rpmbuild/"),"\u76ee\u5f55")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"rpmbuild/\n\u251c\u2500\u2500 SOURCES\n\u2502\xa0\xa0 \u251c\u2500\u2500 COPYRIGHT\n\u2502\xa0\xa0 \u251c\u2500\u2500 logrotate\n\u2502\xa0\xa0 \u251c\u2500\u2500 nginx-1.16.1.tar.gz\n\u2502\xa0\xa0 \u251c\u2500\u2500 nginx.check-reload.sh\n\u2502\xa0\xa0 \u251c\u2500\u2500 nginx.conf      # \u5b9a\u4e49\u914d\u7f6e\u6587\u4ef6\u9ed8\u8ba4\u5185\u5bb9\n\u2502\xa0\xa0 \u251c\u2500\u2500 nginx-debug.service\n\u2502\xa0\xa0 \u251c\u2500\u2500 nginx-debug.sysconf\n\u2502\xa0\xa0 \u251c\u2500\u2500 nginx.init.in\n\u2502\xa0\xa0 \u251c\u2500\u2500 nginx.service\n\u2502\xa0\xa0 \u251c\u2500\u2500 nginx.suse.logrotate\n\u2502\xa0\xa0 \u251c\u2500\u2500 nginx.sysconf\n\u2502\xa0\xa0 \u251c\u2500\u2500 nginx.upgrade.sh\n\u2502\xa0\xa0 \u2514\u2500\u2500 nginx.vh.default.conf\n\u2514\u2500\u2500 SPECS\n    \u2514\u2500\u2500 nginx.spec      # \u6307\u660e\u5982\u4f55\u5b9a\u4e49RPM\u5305,\u6a21\u5757\u53ef\u4ee5\u5728\u6b64\u6587\u4ef6\u5b9a\u4e49\n\n2 directories, 14 files\n")),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},"\u4fee\u6539\u597d\u9700\u6c42\u540e,\u5373\u53ef\u5f00\u59cb\u5236\u4f5c")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"rpmbuild -bb rpmbuild/SPECS/nginx.spec      # \u9009\u9879-bb\u8868\u793a\u53ea\u5efa\u7acb\u4e8c\u8fdb\u5236\u5305,-ba\u8868\u793a\u5efa\u7acb\u6e90\u7801\u548c\u4e8c\u8fdb\u5236\u5305\n")),(0,r.kt)("ol",{start:4},(0,r.kt)("li",{parentName:"ol"},"\u6267\u884c\u5b8c\u6210\u4e4b\u540e,\u4f1a\u5728",(0,r.kt)("inlineCode",{parentName:"li"},"rpmbuild"),"\u6587\u4ef6\u5939\u4e2d\u751f\u6210\u4e00\u4e2a\u540d\u4e3a",(0,r.kt)("inlineCode",{parentName:"li"},"RPMS"),"\u7684\u6587\u4ef6\u5939,\u5185\u5bb9\u5373\u4e3a\u5236\u4f5c\u597d\u7684",(0,r.kt)("inlineCode",{parentName:"li"},"RPM"),"\u5305,\u53ef\u4ee5\u76f4\u63a5\u8fdb\u884c\u5b89\u88c5")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"rpmbuild/RPMS\n\u2514\u2500\u2500 x86_64\n    \u251c\u2500\u2500 nginx-1.16.1-1.el7.ngx.x86_64.rpm       # \u76f4\u63a5\u5b89\u88c5\u5373\u53ef\u4f7f\u7528\n    \u2514\u2500\u2500 nginx-debuginfo-1.16.1-1.el7.ngx.x86_64.rpm\n\n1 directory, 2 files\n")),(0,r.kt)("h2",{id:"nginx\u7f16\u8bd1\u53c2\u6570"},"Nginx\u7f16\u8bd1\u53c2\u6570"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u67e5\u770bNginx\u7f16\u8bd1\u53c2\u6570")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"[root@Nginx ~]\\# nginx -V\n")),(0,r.kt)("p",null,"\u4e0b\u8868\u5c55\u793a\u4e86Nginx\u7f16\u8bd1\u53c2\u6570\u9009\u9879\u4ee5\u53ca\u4f5c\u7528\n",(0,r.kt)("img",{parentName:"p",src:"http://bak.agou-ops.top/uploads/linux/images/m_7631947d4602972ffd8cdc039960e216_r.png",alt:"null"})),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Nginx\u5e38\u7528\u6a21\u5757"),"\nNginx\u6a21\u5757\u5206\u4e3a Nginx\u5b98\u65b9\u6a21\u5757\u4ee5\u53caNginx\u7b2c\u4e09\u65b9\u6a21\u5757\n",(0,r.kt)("img",{parentName:"p",src:"http://bak.agou-ops.top/uploads/linux/images/m_aebb6eae6beb31b1507f0131e67d543e_r.png",alt:"null"})),(0,r.kt)("h2",{id:"\u53c2\u8003\u94fe\u63a5"},"\u53c2\u8003\u94fe\u63a5"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"nginx\u5b98\u65b9RPMS\u4ed3\u5e93:",(0,r.kt)("a",{parentName:"li",href:"http://nginx.org/packages/centos/7/SRPMS/"},"http://nginx.org/packages/centos/7/SRPMS/"))))}u.isMDXComponent=!0}}]);