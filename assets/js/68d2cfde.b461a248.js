"use strict";(self.webpackChunkmy_docsv_4=self.webpackChunkmy_docsv_4||[]).push([[2465],{3905:(e,t,r)=>{r.d(t,{Zo:()=>c,kt:()=>d});var n=r(67294);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var o=n.createContext({}),u=function(e){var t=n.useContext(o),r=t;return e&&(r="function"==typeof e?e(t):l(l({},t),e)),r},c=function(e){var t=u(e.components);return n.createElement(o.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var r=e.components,i=e.mdxType,s=e.originalType,o=e.parentName,c=a(e,["components","mdxType","originalType","parentName"]),m=u(r),d=i,k=m["".concat(o,".").concat(d)]||m[d]||p[d]||s;return r?n.createElement(k,l(l({ref:t},c),{},{components:r})):n.createElement(k,l({ref:t},c))}));function d(e,t){var r=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var s=r.length,l=new Array(s);l[0]=m;var a={};for(var o in t)hasOwnProperty.call(t,o)&&(a[o]=t[o]);a.originalType=e,a.mdxType="string"==typeof e?e:i,l[1]=a;for(var u=2;u<s;u++)l[u]=r[u];return n.createElement.apply(null,l)}return n.createElement.apply(null,r)}m.displayName="MDXCreateElement"},72192:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>o,contentTitle:()=>l,default:()=>p,frontMatter:()=>s,metadata:()=>a,toc:()=>u});var n=r(87462),i=(r(67294),r(3905));const s={},l="\u5341\u4e5d \u5bb9\u5668\u8d44\u6e90\u9650\u5236",a={unversionedId:"CloudNative/k8s/Quicklystart/\u5341\u4e5d \u5bb9\u5668\u8d44\u6e90\u9650\u5236",id:"CloudNative/k8s/Quicklystart/\u5341\u4e5d \u5bb9\u5668\u8d44\u6e90\u9650\u5236",title:"\u5341\u4e5d \u5bb9\u5668\u8d44\u6e90\u9650\u5236",description:"\u8d77\u59cb\u503c requests \u6700\u4f4e\u4fdd\u969c",source:"@site/docs/CloudNative/k8s/Quicklystart/\u5341\u4e5d \u5bb9\u5668\u8d44\u6e90\u9650\u5236.md",sourceDirName:"CloudNative/k8s/Quicklystart",slug:"/CloudNative/k8s/Quicklystart/\u5341\u4e5d \u5bb9\u5668\u8d44\u6e90\u9650\u5236",permalink:"/docs/CloudNative/k8s/Quicklystart/\u5341\u4e5d \u5bb9\u5668\u8d44\u6e90\u9650\u5236",draft:!1,editUrl:"https://github.com/AGou-ops/myDocsv4/edit/main/docs/CloudNative/k8s/Quicklystart/\u5341\u4e5d \u5bb9\u5668\u8d44\u6e90\u9650\u5236.md",tags:[],version:"current",frontMatter:{},sidebar:"cloudNative",previous:{title:"\u5341\u4e09 \u7528\u6237\u8ba4\u8bc1\u7cfb\u7edf",permalink:"/docs/CloudNative/k8s/Quicklystart/\u5341\u4e09 \u7528\u6237\u8ba4\u8bc1\u7cfb\u7edf"},next:{title:"\u5341\u4e8c StatefulSet \u63a7\u5236\u5668",permalink:"/docs/CloudNative/k8s/Quicklystart/\u5341\u4e8c StatefulSet \u63a7\u5236\u5668"}},o={},u=[{value:"19.1 \u8d44\u6e90\u9650\u5236",id:"191-\u8d44\u6e90\u9650\u5236",level:2},{value:"19.2 qos \u8d28\u91cf\u7ba1\u7406",id:"192-qos-\u8d28\u91cf\u7ba1\u7406",level:2}],c={toc:u};function p(e){let{components:t,...r}=e;return(0,i.kt)("wrapper",(0,n.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"\u5341\u4e5d-\u5bb9\u5668\u8d44\u6e90\u9650\u5236"},"\u5341\u4e5d \u5bb9\u5668\u8d44\u6e90\u9650\u5236"),(0,i.kt)("p",null,"\u8d77\u59cb\u503c requests \u6700\u4f4e\u4fdd\u969c"),(0,i.kt)("p",null,"\u7ec8\u7ed3\u503c limits \u786c\u9650\u5236"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"CPU")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"1 \u9897 CPU = 1000 millicores\n0.5 \u9897 CPU = 500 m\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u5185\u5b58")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"Ei\u3001Pi\u3001Ti\u3001Gi\u3001Mi\u3001Ki\n")),(0,i.kt)("h2",{id:"191-\u8d44\u6e90\u9650\u5236"},"19.1 \u8d44\u6e90\u9650\u5236"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u6e05\u5355\u683c\u5f0f\uff0c\u8be6\u89c1\uff1akubectl explain pods.spec.containers.resources")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"resources      <Object>               # \u8d44\u6e90\u9650\u5236\n  limits       <map[string]string>    # \u8d44\u6e90\u6700\u9ad8\u9650\u5236\n    cpu        <string>               # \u5355\u4f4d m\n    memory     <string>               # \u5355\u4f4d Gi\u3001Mi\n  requests     <map[string]string>    # \u8d44\u6e90\u6700\u4f4e\u8981\u6c42\n    cpu        <string>               # \u5355\u4f4d m\n    memory     <string>               # \u5355\u4f4d Gi\u3001Mi\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u6e05\u5355\u793a\u4f8b\uff0cnode \u8282\u70b9\u7684 CPU \u4e3a 12 \u6838\u5fc3\uff0ccpu limits \u8bbe\u7f6e\u4e3a 1000m \u4e5f\u5c31\u662f\u5141\u8bb8")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},'apiVersion: v1\nkind: Pod\nmetadata:\n  name: pod-resources-demo\n  namespace: default\n  labels:\n    app: myapp\n    tier: frontend\nspec:\n  containers:\n  - name: nginx\n    image: ikubernetes/stress-ng\n    command:\n    - "/usr/bin/stress-ng"\n    #- "-m 1"                       # \u4ee5\u5355\u7ebf\u7a0b\u538b\u6d4b\u5185\u5b58\n    - "-c 1"                        # \u4ee5\u5355\u7ebf\u7a0b\u538b\u6d4bCPU\n    - "--metrics-brief"\n    ports:\n    - name: http\n      containerPort: 80\n    - name: https\n      containerPort: 443\n    resources:\n      requests:\n        cpu: 1000m                 # \u5b83\u51b3\u5b9a\u5728\u9884\u9009\u9636\u6bb5\u6dd8\u6c70\u54ea\u4e9b\u4e3b\u673a\n        memory: 512Mi\n      limits:\n        cpu: 1000m                 # \u8868\u793a\u9650\u5236\u5bb9\u5668\u4f7f\u7528 node \u8282\u70b9\u7684\u4e00\u9897 CPU\uff0c\u65e0\u8bba\u591a\u5c11\u8fdb\u7a0b\uff0c\u5b83\u4eec\u6700\u591a\u53ea\u80fd\u5360\u7528 node \u8282\u70b9\u7684\u53ef CPU\n        memory: 512Mi\n')),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u67e5\u770b\u7ed3\u679c")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"Mem: 855392K used, 139916K free, 10188K shrd, 796K buff, 350368K cached\nCPU0:   0% usr   0% sys   0% nic  99% idle   0% io   0% irq   0% sirq\nCPU1: 100% usr   0% sys   0% nic   0% idle   0% io   0% irq   0% sirq         # \u5360\u6ee1\u4e86\u4e00\u9897 CPU\nCPU2:   0% usr   0% sys   0% nic  99% idle   0% io   0% irq   0% sirq\nCPU3:   0% usr   0% sys   0% nic  99% idle   0% io   0% irq   0% sirq\nCPU4:   0% usr   0% sys   0% nic  99% idle   0% io   0% irq   0% sirq\nCPU5:   0% usr   0% sys   0% nic  99% idle   0% io   0% irq   0% sirq\nCPU6:   0% usr   0% sys   0% nic  99% idle   0% io   0% irq   0% sirq\nCPU7:   0% usr   0% sys   0% nic  99% idle   0% io   0% irq   0% sirq\nCPU8:   0% usr   0% sys   0% nic  99% idle   0% io   0% irq   0% sirq\nCPU9:   0% usr   0% sys   0% nic  99% idle   0% io   0% irq   0% sirq\nCPU10:   0% usr   0% sys   0% nic  99% idle   0% io   0% irq   0% sirq\nCPU11:   0% usr   0% sys   0% nic  99% idle   0% io   0% irq   0% sirq\nLoad average: 0.84 0.50 0.40 3/485 11\n  PID  PPID USER     STAT   VSZ %VSZ CPU %CPU COMMAND\n    6     1 root     R     6888   1%   1   8% {stress-ng-cpu} /usr/bin/stress-ng -c 1 --metrics-brief\n    1     0 root     S     6244   1%  10   0% /usr/bin/stress-ng -c 1 --metrics-brief\n    7     0 root     R     1504   0%  11   0% top\n")),(0,i.kt)("h2",{id:"192-qos-\u8d28\u91cf\u7ba1\u7406"},"19.2 qos \u8d28\u91cf\u7ba1\u7406"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"GuranteedW")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"\u6bcf\u4e2a\u5bb9\u5668\u540c\u65f6\u8bbe\u7f6e\u4e86 CPU \u548c\u5185\u5b58\u7684 requests \u548c limits\uff0c\u800c\u4e14\n    cpu.limits = cpu.requests\n    memory.limits = memory.requests\n\u90a3\u4e48\u5b83\u5c06\u4f18\u5148\u88ab\u8c03\u5ea6\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Burstable")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"\u81f3\u5c11\u6709\u4e00\u4e2a\u5bb9\u5668\u8bbe\u7f6e CPU \u6216\u5185\u5b58\u8d44\u6e90\u7684 requests \u5c5e\u6027\n\n\u90a3\u4e48\u5b83\u5c06\u5177\u6709\u4e2d\u7b49\u4f18\u5148\u7ea7\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"BestEffort")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"\u6ca1\u6709\u4efb\u4f55\u4e00\u4e2a\u5bb9\u5668\u8bbe\u7f6e\u4e86 requests \u6216 limits \u5c5e\u6027\n\n\u90a3\u4e48\u5b83\u5c06\u53ea\u6709\u6700\u4f4e\u4f18\u5148\u7ea7\uff0c\u5f53\u8d44\u6e90\u4e0d\u591f\u7528\u7684\u65f6\u5019\uff0c\u8fd9\u4e2a\u5bb9\u5668\u53ef\u80fd\u6700\u5148\u88ab\u7ec8\u6b62\uff0c\u4ee5\u817e\u51fa\u8d44\u6e90\u6765\uff0c\u4e3a Burstable \u548c Guranteed\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"oom \u7b56\u7565")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"\u6700\u5148\u6740\u6b7b\u5360\u7528\u91cf\u548c\u9700\u6c42\u91cf\u7684\u6bd4\u4f8b\u5927\u7684\n")))}p.isMDXComponent=!0}}]);