<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-CloudNative/Docker/Docker Compose">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">Docker Compose | AGou&#x27;s Docsv4</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.agou-ops.cn/docs/CloudNative/Docker/Docker Compose"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Docker Compose | AGou&#x27;s Docsv4"><meta data-rh="true" name="description" content="Docker Compose ç®€ä»‹"><meta data-rh="true" property="og:description" content="Docker Compose ç®€ä»‹"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://docs.agou-ops.cn/docs/CloudNative/Docker/Docker Compose"><link data-rh="true" rel="alternate" href="https://docs.agou-ops.cn/docs/CloudNative/Docker/Docker Compose" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.agou-ops.cn/docs/CloudNative/Docker/Docker Compose" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-KQED41RW95","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script><link rel="stylesheet" href="/assets/css/styles.916b7a43.css">
<link rel="preload" href="/assets/js/runtime~main.755b355e.js" as="script">
<link rel="preload" href="/assets/js/main.7f3bf5c4.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Welcome to AGou&#x27;s Docs!" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.png" alt="Welcome to AGou&#x27;s Docs!" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">AGou&#x27;s Docsv4</b></a><a href="https://agou-ops.cn" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">âœ¨ æˆ‘çš„åšå®¢<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"> ğŸ“– ç›®å½•</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs">ğŸŒ² ç›®å½•æ ‘</a></li><li><hr style="margin: 0.3rem 0;"></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/category/äº‘åŸç”Ÿç›¸å…³">â˜ï¸ äº‘åŸç”Ÿç›¸å…³</a></li><li><a class="dropdown__link" href="/docs/category/linuxåŸºç¡€">ğŸ˜Š LinuxåŸºç¡€</a></li><li><a class="dropdown__link" href="/docs/category/ç¼–ç¨‹è¯­è¨€">â™¨ï¸ ç¼–ç¨‹è¯­è¨€</a></li><li><a class="dropdown__link" href="/docs/category/è„šæœ¬ç›¸å…³">ğŸ•¹ï¸ è„šæœ¬ç›¸å…³</a></li><li><a class="dropdown__link" href="/docs/category/é¢è¯•ç›¸å…³">ğŸ‘¨â€âš–ï¸ é¢è¯•ç›¸å…³</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">ç‰ˆæœ¬</a><ul class="dropdown__menu"><li><a href="https://agou-ops.cn/myDocs" target="_blank" rel="noopener noreferrer" class="dropdown__link">Ver1.0<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://agou-ops.cn/myDocsv2" target="_blank" rel="noopener noreferrer" class="dropdown__link">Ver2.0<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://agou-ops.cn/myDocsv3" target="_blank" rel="noopener noreferrer" class="dropdown__link">Ver3.0<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><a href="https://github.com/AGou-ops" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub ä»“åº“"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/"><img src="/img/logo.png" alt="Welcome to AGou&#x27;s Docs!" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.png" alt="Welcome to AGou&#x27;s Docs!" class="themedImage_ToTc themedImage--dark_i4oU"><b>AGou&#x27;s Docsv4</b></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/äº‘åŸç”Ÿç›¸å…³">äº‘åŸç”Ÿç›¸å…³</a><button aria-label="Toggle the collapsible sidebar category &#x27;äº‘åŸç”Ÿç›¸å…³&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/cicd">CICD</a><button aria-label="Toggle the collapsible sidebar category &#x27;CICD&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/cloudcomptering">CloudComptering</a><button aria-label="Toggle the collapsible sidebar category &#x27;CloudComptering&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/category/docker">Docker</a><button aria-label="Toggle the collapsible sidebar category &#x27;Docker&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CloudNative/Docker/Docker Basic">Docker Basic</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/CloudNative/Docker/Docker Compose">Docker Compose</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CloudNative/Docker/Docker Network">Docker Network</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CloudNative/Docker/Docker Portainer">Docker Portainer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CloudNative/Docker/Docker Private Registry">Docker Private Registry</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CloudNative/Docker/Docker Remote Access">Docker è¿œç¨‹è®¿é—®</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CloudNative/Docker/Docker Volume">Docker Volume</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CloudNative/Docker/Docker openvswitch">Docker openvswitch</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CloudNative/Docker/Docker å›ºå®šIPåŠè·¨ä¸»æœºäº’é€š">Docker å›ºå®šIPåŠè·¨ä¸»æœºäº’é€š</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CloudNative/Docker/Docker å®¹å™¨é—´é€šè¿‡ä¸»æœºåäº’ç›¸è®¿é—®">Docker å®¹å™¨é—´é€šè¿‡ä¸»æœºåäº’ç›¸è®¿é—®</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CloudNative/Docker/DockerFile">DockerFile</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CloudNative/Docker/SSH Docker container">SSH Docker container</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/elfk">ELFK</a><button aria-label="Toggle the collapsible sidebar category &#x27;ELFK&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/prometheus">Prometheus</a><button aria-label="Toggle the collapsible sidebar category &#x27;Prometheus&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/k8s">k8s</a><button aria-label="Toggle the collapsible sidebar category &#x27;k8s&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CloudNative/Consul å…¥é—¨">Consul å…¥é—¨</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CloudNative/Dubbo Basic">Dubbo Basic</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CloudNative/Grafana Loki Basic">Grafana Loki</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CloudNative/Istio Basic">Istio Basic</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CloudNative/">CloudNative.</a></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/äº‘åŸç”Ÿç›¸å…³"><span itemprop="name">äº‘åŸç”Ÿç›¸å…³</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/docker"><span itemprop="name">Docker</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Docker Compose</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Docker Compose</h1><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="docker-compose-ç®€ä»‹">Docker Compose ç®€ä»‹<a href="#docker-compose-ç®€ä»‹" class="hash-link" aria-label="Direct link to Docker Compose ç®€ä»‹" title="Direct link to Docker Compose ç®€ä»‹">â€‹</a></h2><p>Composeæ˜¯ç”¨äºå®šä¹‰å’Œè¿è¡Œå¤šå®¹å™¨Dockeråº”ç”¨ç¨‹åºçš„å·¥å…·ã€‚é€šè¿‡Composeï¼Œæ‚¨å¯ä»¥ä½¿ç”¨YAMLæ–‡ä»¶æ¥é…ç½®åº”ç”¨ç¨‹åºçš„æœåŠ¡ã€‚ç„¶åï¼Œä½¿ç”¨ä¸€ä¸ªå‘½ä»¤ï¼Œå°±å¯ä»¥ä»é…ç½®ä¸­åˆ›å»ºå¹¶å¯åŠ¨æ‰€æœ‰æœåŠ¡ã€‚Composeå¯åœ¨æ‰€æœ‰ç¯å¢ƒä¸­å·¥ä½œï¼šç”Ÿäº§ï¼Œç™»å°ï¼Œå¼€å‘ï¼Œæµ‹è¯•ä»¥åŠCIå·¥ä½œæµã€‚</p><p>ä½¿ç”¨ComposeåŸºæœ¬ä¸Šæ˜¯ä¸€ä¸ªä¸‰æ­¥è¿‡ç¨‹ï¼š</p><ol><li>ä½¿ç”¨å®šä¹‰æ‚¨çš„åº”ç”¨ç¯å¢ƒï¼Œ<code>Dockerfile</code>ä»¥ä¾¿å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹å¤åˆ¶ã€‚</li><li>å®šä¹‰ç»„æˆåº”ç”¨ç¨‹åºçš„æœåŠ¡ï¼Œ<code>docker-compose.yml</code> ä»¥ä¾¿å®ƒä»¬å¯ä»¥åœ¨éš”ç¦»çš„ç¯å¢ƒä¸­ä¸€èµ·è¿è¡Œã€‚</li><li>è¿è¡Œ <code>docker-compose up</code>å¯åŠ¨å¹¶è¿è¡Œæ‚¨çš„æ•´ä¸ªåº”ç”¨ç¨‹åºã€‚</li></ol><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="docker-compose-å®‰è£…">Docker Compose å®‰è£…<a href="#docker-compose-å®‰è£…" class="hash-link" aria-label="Direct link to Docker Compose å®‰è£…" title="Direct link to Docker Compose å®‰è£…">â€‹</a></h2><p>è¿è¡Œä»¥ä¸‹å‘½ä»¤ä»¥ä¸‹è½½Docker Composeçš„å½“å‰ç¨³å®šç‰ˆæœ¬ï¼š</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -L </span><span class="token string" style="color:#e3116c">&quot;https://github.com/docker/compose/releases/download/1.25.5/docker-compose-</span><span class="token string variable" style="color:#36acaa">$(</span><span class="token string variable function" style="color:#d73a49">uname</span><span class="token string variable" style="color:#36acaa"> -s</span><span class="token string variable" style="color:#36acaa">)</span><span class="token string" style="color:#e3116c">-</span><span class="token string variable" style="color:#36acaa">$(</span><span class="token string variable function" style="color:#d73a49">uname</span><span class="token string variable" style="color:#36acaa"> -m</span><span class="token string variable" style="color:#36acaa">)</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> -o /usr/local/bin/docker-compose</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä¸ºå…¶å¢åŠ å¯æ‰§è¡Œæƒé™ï¼š</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">chmod</span><span class="token plain"> +x /usr/local/bin/docker-compose</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ£€æŸ¥æ˜¯å¦æˆåŠŸå®‰è£…ï¼š</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">docker-compose</span><span class="token plain"> --version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">docker-compose</span><span class="token plain"> version </span><span class="token number" style="color:#36acaa">1.25</span><span class="token plain">.5, build 1110ad01</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="docker-å¸¸ç”¨å‘½ä»¤åŠç»„åˆ">Docker å¸¸ç”¨å‘½ä»¤åŠç»„åˆ<a href="#docker-å¸¸ç”¨å‘½ä»¤åŠç»„åˆ" class="hash-link" aria-label="Direct link to Docker å¸¸ç”¨å‘½ä»¤åŠç»„åˆ" title="Direct link to Docker å¸¸ç”¨å‘½ä»¤åŠç»„åˆ">â€‹</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="docker-composeç›¸å…³å‘½ä»¤">docker-composeç›¸å…³å‘½ä»¤<a href="#docker-composeç›¸å…³å‘½ä»¤" class="hash-link" aria-label="Direct link to docker-composeç›¸å…³å‘½ä»¤" title="Direct link to docker-composeç›¸å…³å‘½ä»¤">â€‹</a></h3><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># æ„å»ºé•œåƒ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">docker-compose</span><span class="token plain"> build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># æ„å»ºé•œåƒï¼Œ--no-cacheè¡¨ç¤ºä¸ç”¨ç¼“å­˜ï¼Œå¦åˆ™åœ¨é‡æ–°ç¼–è¾‘Dockerfileåå†buildå¯èƒ½ä¼šç›´æ¥ä½¿ç”¨ç¼“å­˜è€Œå¯¼è‡´æ–°ç¼–è¾‘å†…å®¹ä¸ç”Ÿæ•ˆ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">docker-compose</span><span class="token plain"> build --no-cache</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># config æ ¡éªŒæ–‡ä»¶æ ¼å¼æ˜¯å¦æ­£ç¡®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">docker-compose</span><span class="token plain"> -f docker-compose.yml config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># è¿è¡ŒæœåŠ¡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ocker-compose up -d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># å¯åŠ¨/åœæ­¢æœåŠ¡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">docker-compose</span><span class="token plain"> start/stop æœåŠ¡å</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># åœæ­¢æœåŠ¡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">docker-compose</span><span class="token plain"> down</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># æŸ¥çœ‹å®¹å™¨æ—¥å¿—</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> logs -f å®¹å™¨ID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># æŸ¥çœ‹é•œåƒ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">docker-compose</span><span class="token plain"> images</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># æ‹‰å–é•œåƒ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">docker-compose</span><span class="token plain"> pull é•œåƒå</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="å¸¸ç”¨shellç»„åˆ">å¸¸ç”¨shellç»„åˆ<a href="#å¸¸ç”¨shellç»„åˆ" class="hash-link" aria-label="Direct link to å¸¸ç”¨shellç»„åˆ" title="Direct link to å¸¸ç”¨shellç»„åˆ">â€‹</a></h3><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># åˆ é™¤æ‰€æœ‰å®¹å™¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> stop </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable function" style="color:#d73a49">docker</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable function" style="color:#d73a49">ps</span><span class="token variable" style="color:#36acaa"> -q -a</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">xargs</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">rm</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># åˆ é™¤æ‰€æœ‰æ ‡ç­¾ä¸ºnoneçš„é•œåƒ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> images</span><span class="token operator" style="color:#393A34">|</span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token punctuation" style="color:#393A34">\</span><span class="token operator" style="color:#393A34">&gt;|</span><span class="token function" style="color:#d73a49">awk</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;{print $3}&#x27;</span><span class="token operator" style="color:#393A34">|</span><span class="token function" style="color:#d73a49">xargs</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> rmi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># æŸ¥æ‰¾å®¹å™¨IPåœ°å€</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> inspect å®¹å™¨åæˆ–ID </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;IPAddress&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># åˆ›å»ºç½‘æ®µ, åç§°: mynet, åˆ†é…ä¸¤ä¸ªå®¹å™¨åœ¨åŒä¸€ç½‘æ®µä¸­ (è¿™æ ·å­æ‰å¯ä»¥äº’ç›¸é€šä¿¡)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> network create mynet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run -d --net mynet --name container1 my_image</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run -it --net mynet --name container1 another_image</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è¯¦ç»†å‚è€ƒï¼š<!-- -->[Docker Compose å‘½ä»¤ä¸é…ç½®è¯¦è§£]<!-- -->(Docker Compose å‘½ä»¤ä¸é…ç½®è¯¦è§£)</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="å¿«é€Ÿå…¥é—¨-compose--wordpress">å¿«é€Ÿå…¥é—¨ Compose &amp; Wordpress<a href="#å¿«é€Ÿå…¥é—¨-compose--wordpress" class="hash-link" aria-label="Direct link to å¿«é€Ÿå…¥é—¨ Compose &amp; Wordpress" title="Direct link to å¿«é€Ÿå…¥é—¨ Compose &amp; Wordpress">â€‹</a></h2><p>åˆ›å»ºé¡¹ç›®æ–‡ä»¶å¤¹ï¼š</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> my_wordpress/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> my_wordpress/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åˆ›å»º<code>docker-compose.yml</code>æ–‡ä»¶ï¼š</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">version: </span><span class="token string" style="color:#e3116c">&#x27;3.3&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">services:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   db:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     image: mysql:5.7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     volumes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       - db_data:/var/lib/mysql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     restart: always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     environment:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       MYSQL_ROOT_PASSWORD: somewordpress</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       MYSQL_DATABASE: wordpress</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       MYSQL_USER: wordpress</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       MYSQL_PASSWORD: wordpress</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   wordpress:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     depends_on:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       - db</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     image: wordpress:latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       - </span><span class="token string" style="color:#e3116c">&quot;8000:80&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     restart: always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     environment:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       WORDPRESS_DB_HOST: db:3306</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       WORDPRESS_DB_USER: wordpress</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       WORDPRESS_DB_PASSWORD: wordpress</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       WORDPRESS_DB_NAME: wordpress</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">volumes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    db_data: </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ„å»ºé¡¹ç›®ï¼š</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker-compose</span><span class="token plain"> up -d</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç­‰å¾…å®Œæˆä¹‹åï¼Œæ‰“å¼€æµè§ˆå™¨è®¿é—® <a href="http://127.0.0.1:8000" target="_blank" rel="noopener noreferrer">http://127.0.0.1:8000</a> å³å¯.</p><blockquote><p>è¯¥ç¤ºä¾‹æ¥æºäºå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://docs.docker.com/compose/wordpress/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/compose/wordpress/</a></p></blockquote><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="docker-compose-å‘½ä»¤ä¸é…ç½®è¯¦è§£">Docker Compose å‘½ä»¤ä¸é…ç½®è¯¦è§£<a href="#docker-compose-å‘½ä»¤ä¸é…ç½®è¯¦è§£" class="hash-link" aria-label="Direct link to Docker Compose å‘½ä»¤ä¸é…ç½®è¯¦è§£" title="Direct link to Docker Compose å‘½ä»¤ä¸é…ç½®è¯¦è§£">â€‹</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="å¸¸ç”¨å‘½ä»¤å‚æ•°">å¸¸ç”¨å‘½ä»¤å‚æ•°<a href="#å¸¸ç”¨å‘½ä»¤å‚æ•°" class="hash-link" aria-label="Direct link to å¸¸ç”¨å‘½ä»¤å‚æ•°" title="Direct link to å¸¸ç”¨å‘½ä»¤å‚æ•°">â€‹</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">build       Build or rebuild services </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">æ„å»ºé¡¹ç›®ä¸­çš„æœåŠ¡å®¹å™¨</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bundle       Generate a Docker bundle from the Compose `</span><span class="token variable" style="color:#36acaa">`</span><span class="token variable function" style="color:#d73a49">file</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">ä»Composeæ–‡ä»¶ç”Ÿæˆåˆ†å¸ƒå¼åº”ç”¨ç¨‹åºåŒ…</span><span class="token variable punctuation" style="color:#393A34">)</span><span class="token variable" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token variable" style="color:#36acaa">config       Validate and view the Compose </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">`</span><span class="token variable function" style="color:#d73a49">file</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">éªŒè¯å¹¶æŸ¥çœ‹Composeæ–‡ä»¶</span><span class="token variable punctuation" style="color:#393A34">)</span><span class="token variable" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token variable" style="color:#36acaa">create       Create services </span><span class="token variable punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">ä¸ºæœåŠ¡åˆ›å»ºå®¹å™¨</span><span class="token variable punctuation" style="color:#393A34">)</span><span class="token variable" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token variable" style="color:#36acaa">down        Stop and remove containers, networks, images, and volumes </span><span class="token variable punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">åœæ­¢å®¹å™¨å¹¶åˆ é™¤ç”±å…¶åˆ›å»ºçš„å®¹å™¨ï¼Œç½‘ç»œï¼Œå·å’Œå›¾åƒup</span><span class="token variable punctuation" style="color:#393A34">)</span><span class="token variable" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token variable" style="color:#36acaa">events       Receive real </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">`</span><span class="token variable function" style="color:#d73a49">time</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">events from containers </span><span class="token variable punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">ä¸ºé¡¹ç›®ä¸­çš„æ¯ä¸ªå®¹å™¨æµå¼ä¼ è¾“å®¹å™¨äº‹ä»¶</span><span class="token variable punctuation" style="color:#393A34">)</span><span class="token variable" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token variable" style="color:#36acaa"></span><span class="token variable builtin class-name" style="color:#36acaa">exec</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain">        </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">Execute a </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">`</span><span class="token variable builtin class-name" style="color:#36acaa">command</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable keyword" style="color:#00009f">in</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">a running container </span><span class="token variable punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">è¿™ç›¸å½“äºdocker </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">`</span><span class="token variable builtin class-name" style="color:#36acaa">exec</span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">ã€‚ä½¿ç”¨æ­¤å­å‘½ä»¤ï¼Œæ‚¨å¯ä»¥åœ¨æœåŠ¡ä¸­è¿è¡Œä»»æ„å‘½ä»¤ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå‘½ä»¤åˆ†é…TTYï¼Œå› æ­¤æ‚¨å¯ä»¥ä½¿ç”¨å‘½ä»¤docker-compose </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">`</span><span class="token variable builtin class-name" style="color:#36acaa">exec</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">web shæ¥è·å–äº¤äº’å¼æç¤ºã€‚</span><span class="token variable punctuation" style="color:#393A34">)</span><span class="token variable" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token variable" style="color:#36acaa"></span><span class="token variable builtin class-name" style="color:#36acaa">help</span><span class="token variable" style="color:#36acaa">        Get </span><span class="token variable builtin class-name" style="color:#36acaa">help</span><span class="token variable" style="color:#36acaa"> on a </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">`</span><span class="token variable builtin class-name" style="color:#36acaa">command</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">è·å¾—ä¸€ä¸ªå‘½ä»¤çš„å¸®åŠ©</span><span class="token variable punctuation" style="color:#393A34">)</span><span class="token variable" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token variable" style="color:#36acaa">images       List images </span><span class="token variable punctuation" style="color:#393A34">(</span><span class="token variable punctuation" style="color:#393A34">)</span><span class="token variable" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token variable" style="color:#36acaa"></span><span class="token variable function" style="color:#d73a49">kill</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain">        </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">Kill containers </span><span class="token variable punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">é€šè¿‡å‘é€SIGKILLä¿¡å·æ¥å¼ºåˆ¶åœæ­¢æœåŠ¡å®¹å™¨</span><span class="token variable punctuation" style="color:#393A34">)</span><span class="token variable" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token variable" style="color:#36acaa">logs        View output from containers </span><span class="token variable punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">æŸ¥çœ‹æœåŠ¡å®¹å™¨çš„è¾“å‡º</span><span class="token variable punctuation" style="color:#393A34">)</span><span class="token variable" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token variable" style="color:#36acaa">pause       Pause services </span><span class="token variable punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">æš‚åœä¸€ä¸ªå®¹å™¨</span><span class="token variable punctuation" style="color:#393A34">)</span><span class="token variable" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token variable" style="color:#36acaa">port        Print the public port </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">`</span><span class="token variable keyword" style="color:#00009f">for</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">a port binding </span><span class="token variable punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">æ‰“å°æŸä¸ªå®¹å™¨ç«¯å£æ‰€æ˜ å°„çš„å…¬å…±ç«¯å£</span><span class="token variable punctuation" style="color:#393A34">)</span><span class="token variable" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token variable" style="color:#36acaa"></span><span class="token variable function" style="color:#d73a49">ps</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain">         </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">List containers </span><span class="token variable punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">åˆ—å‡ºé¡¹ç›®ä¸­ç›®å‰æ‰€æœ‰çš„å®¹å™¨</span><span class="token variable punctuation" style="color:#393A34">)</span><span class="token variable" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token variable" style="color:#36acaa">pull        Pull </span><span class="token variable function" style="color:#d73a49">service</span><span class="token variable" style="color:#36acaa"> images </span><span class="token variable punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">æ‹‰å–æœåŠ¡ä¾èµ–é•œåƒ</span><span class="token variable punctuation" style="color:#393A34">)</span><span class="token variable" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token variable" style="color:#36acaa">push        Push </span><span class="token variable function" style="color:#d73a49">service</span><span class="token variable" style="color:#36acaa"> images </span><span class="token variable punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">æ¨é€æœåŠ¡é•œåƒ</span><span class="token variable punctuation" style="color:#393A34">)</span><span class="token variable" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token variable" style="color:#36acaa">restart      Restart services </span><span class="token variable punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">é‡å¯é¡¹ç›®ä¸­çš„æœåŠ¡</span><span class="token variable punctuation" style="color:#393A34">)</span><span class="token variable" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token variable" style="color:#36acaa"></span><span class="token variable function" style="color:#d73a49">rm</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain">         </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">Remove stopped containers </span><span class="token variable punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">åˆ é™¤æ‰€æœ‰åœæ­¢çŠ¶æ€çš„æœåŠ¡å®¹å™¨</span><span class="token variable punctuation" style="color:#393A34">)</span><span class="token variable" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token variable" style="color:#36acaa">run        Run a one-off </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">`</span><span class="token variable builtin class-name" style="color:#36acaa">command</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">åœ¨æŒ‡å®šæœåŠ¡ä¸Šæ‰§è¡Œä¸€ä¸ªå‘½ä»¤</span><span class="token variable punctuation" style="color:#393A34">)</span><span class="token variable" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token variable" style="color:#36acaa">scale       Set number of containers </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">`</span><span class="token variable keyword" style="color:#00009f">for</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">a </span><span class="token variable function" style="color:#d73a49">service</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">è®¾ç½®æŒ‡å®šæœåŠ¡æ‰§è¡Œçš„å®¹å™¨ä¸ªæ•°</span><span class="token variable punctuation" style="color:#393A34">)</span><span class="token variable" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token variable" style="color:#36acaa">start       Start services </span><span class="token variable punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">å¯åŠ¨å·²å­˜åœ¨çš„æœåŠ¡å®¹å™¨</span><span class="token variable punctuation" style="color:#393A34">)</span><span class="token variable" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token variable" style="color:#36acaa">stop        Stop services </span><span class="token variable punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">åœæ­¢å·²å­˜åœ¨çš„æœåŠ¡å®¹å™¨</span><span class="token variable punctuation" style="color:#393A34">)</span><span class="token variable" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token variable" style="color:#36acaa"></span><span class="token variable function" style="color:#d73a49">top</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain">        `Display the running processes </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">æ˜¾ç¤ºå®¹å™¨æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">unpause      Unpause services </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">æ¢å¤å¤„äºæš‚åœçŠ¶æ€çš„å®¹å™¨</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">up         Create and start containers </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">è‡ªåŠ¨å®ŒæˆåŒ…æ‹¬æ„å»ºé•œåƒã€åˆ›å»ºæœåŠ¡ã€å¯åŠ¨æœåŠ¡å¹¶å…³è”æœåŠ¡ç›¸å…³å®¹å™¨çš„ä¸€ç³»åˆ—æ“ä½œ</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">version      Show the Docker-Compose version information </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">è¾“å‡ºç‰ˆæœ¬</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="æ¨¡æ¿é…ç½®æ–‡ä»¶">æ¨¡æ¿é…ç½®æ–‡ä»¶<a href="#æ¨¡æ¿é…ç½®æ–‡ä»¶" class="hash-link" aria-label="Direct link to æ¨¡æ¿é…ç½®æ–‡ä»¶" title="Direct link to æ¨¡æ¿é…ç½®æ–‡ä»¶">â€‹</a></h3><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Composeå’ŒDockerå…¼å®¹æ€§ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Compose æ–‡ä»¶æ ¼å¼æœ‰3ä¸ªç‰ˆæœ¬</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">åˆ†åˆ«ä¸º1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 2.x å’Œ 3.x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ç›®å‰ä¸»æµçš„ä¸º 3.x å…¶æ”¯æŒ docker 1.13.0 åŠå…¶ä»¥ä¸Šçš„ç‰ˆæœ¬</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">å¸¸ç”¨å‚æ•°ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    version           </span><span class="token comment" style="color:#999988;font-style:italic"># æŒ‡å®š compose æ–‡ä»¶çš„ç‰ˆæœ¬</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    services          </span><span class="token comment" style="color:#999988;font-style:italic"># å®šä¹‰æ‰€æœ‰çš„ service ä¿¡æ¯, services ä¸‹é¢çš„ç¬¬ä¸€çº§åˆ«çš„ key æ—¢æ˜¯ä¸€ä¸ª service çš„åç§°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        build                 </span><span class="token comment" style="color:#999988;font-style:italic"># æŒ‡å®šåŒ…å«æ„å»ºä¸Šä¸‹æ–‡çš„è·¯å¾„, æˆ–ä½œä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡å…·æœ‰ context å’ŒæŒ‡å®šçš„ dockerfile æ–‡ä»¶ä»¥åŠ args å‚æ•°å€¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            context               </span><span class="token comment" style="color:#999988;font-style:italic"># context: æŒ‡å®š Dockerfile æ–‡ä»¶æ‰€åœ¨çš„è·¯å¾„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            dockerfile            </span><span class="token comment" style="color:#999988;font-style:italic"># dockerfile: æŒ‡å®š context æŒ‡å®šçš„ç›®å½•ä¸‹é¢çš„ Dockerfile çš„åç§°(é»˜è®¤ä¸º Dockerfile)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            args                  </span><span class="token comment" style="color:#999988;font-style:italic"># args: Dockerfile åœ¨ build è¿‡ç¨‹ä¸­éœ€è¦çš„å‚æ•° (ç­‰åŒäº docker container build --build-arg çš„ä½œç”¨)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            cache_from            </span><span class="token comment" style="color:#999988;font-style:italic"># v3.2ä¸­æ–°å¢çš„å‚æ•°, æŒ‡å®šç¼“å­˜çš„é•œåƒåˆ—è¡¨ (ç­‰åŒäº docker container build --cache_from çš„ä½œç”¨)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            labels                </span><span class="token comment" style="color:#999988;font-style:italic"># v3.3ä¸­æ–°å¢çš„å‚æ•°, è®¾ç½®é•œåƒçš„å…ƒæ•°æ® (ç­‰åŒäº docker container build --labels çš„ä½œç”¨)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            shm_size              </span><span class="token comment" style="color:#999988;font-style:italic"># v3.5ä¸­æ–°å¢çš„å‚æ•°, è®¾ç½®å®¹å™¨ /dev/shm åˆ†åŒºçš„å¤§å° (ç­‰åŒäº docker container build --shm-size çš„ä½œç”¨)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        command               </span><span class="token comment" style="color:#999988;font-style:italic"># è¦†ç›–å®¹å™¨å¯åŠ¨åé»˜è®¤æ‰§è¡Œçš„å‘½ä»¤, æ”¯æŒ shell æ ¼å¼å’Œ [] æ ¼å¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        configs               </span><span class="token comment" style="color:#999988;font-style:italic"># ä¸çŸ¥é“æ€ä¹ˆç”¨ï¼Œå“ˆå“ˆã€‚ã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cgroup_parent         </span><span class="token comment" style="color:#999988;font-style:italic"># ä¸çŸ¥é“æ€ä¹ˆç”¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        container_name        </span><span class="token comment" style="color:#999988;font-style:italic"># æŒ‡å®šå®¹å™¨çš„åç§° (ç­‰åŒäº docker run --name çš„ä½œç”¨)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        credential_spec       </span><span class="token comment" style="color:#999988;font-style:italic"># ä¸çŸ¥é“æ€ä¹ˆç”¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        deploy                </span><span class="token comment" style="color:#999988;font-style:italic"># v3 ç‰ˆæœ¬ä»¥ä¸Š, æŒ‡å®šä¸éƒ¨ç½²å’Œè¿è¡ŒæœåŠ¡ç›¸å…³çš„é…ç½®, deploy éƒ¨åˆ†æ˜¯ docker stack ä½¿ç”¨çš„, docker stack ä¾èµ– docker swarm</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            endpoint_mode         </span><span class="token comment" style="color:#999988;font-style:italic"># v3.3 ç‰ˆæœ¬ä¸­æ–°å¢çš„åŠŸèƒ½, æŒ‡å®šæœåŠ¡æš´éœ²çš„æ–¹å¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                vip                   </span><span class="token comment" style="color:#999988;font-style:italic"># Docker ä¸ºè¯¥æœåŠ¡åˆ†é…äº†ä¸€ä¸ªè™šæ‹Ÿ IP(VIP), ä½œä¸ºå®¢æˆ·ç«¯çš„è®¿é—®æœåŠ¡çš„åœ°å€</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                dnsrr                 </span><span class="token comment" style="color:#999988;font-style:italic"># DNSè½®è¯¢, Docker ä¸ºè¯¥æœåŠ¡è®¾ç½® DNS æ¡ç›®, ä½¿å¾—æœåŠ¡åç§°çš„ DNS æŸ¥è¯¢è¿”å›ä¸€ä¸ª IP åœ°å€åˆ—è¡¨, å®¢æˆ·ç«¯ç›´æ¥è®¿é—®å…¶ä¸­çš„ä¸€ä¸ªåœ°å€</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            labels                </span><span class="token comment" style="color:#999988;font-style:italic"># æŒ‡å®šæœåŠ¡çš„æ ‡ç­¾ï¼Œè¿™äº›æ ‡ç­¾ä»…åœ¨æœåŠ¡ä¸Šè®¾ç½®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            mode                  </span><span class="token comment" style="color:#999988;font-style:italic"># æŒ‡å®š deploy çš„æ¨¡å¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                global                </span><span class="token comment" style="color:#999988;font-style:italic"># æ¯ä¸ªé›†ç¾¤èŠ‚ç‚¹éƒ½åªæœ‰ä¸€ä¸ªå®¹å™¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                replicated            </span><span class="token comment" style="color:#999988;font-style:italic"># ç”¨æˆ·å¯ä»¥æŒ‡å®šé›†ç¾¤ä¸­å®¹å™¨çš„æ•°é‡(é»˜è®¤)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            placement             </span><span class="token comment" style="color:#999988;font-style:italic"># ä¸çŸ¥é“æ€ä¹ˆç”¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            replicas              </span><span class="token comment" style="color:#999988;font-style:italic"># deploy çš„ mode ä¸º replicated æ—¶, æŒ‡å®šå®¹å™¨å‰¯æœ¬çš„æ•°é‡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            resources             </span><span class="token comment" style="color:#999988;font-style:italic"># èµ„æºé™åˆ¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                limits                </span><span class="token comment" style="color:#999988;font-style:italic"># è®¾ç½®å®¹å™¨çš„èµ„æºé™åˆ¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token key atrule" style="color:#00a4db">cpus</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0.5&quot;</span><span class="token plain">           </span><span class="token comment" style="color:#999988;font-style:italic"># è®¾ç½®è¯¥å®¹å™¨æœ€å¤šåªèƒ½ä½¿ç”¨ 50% çš„ CPU</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 50M           </span><span class="token comment" style="color:#999988;font-style:italic"># è®¾ç½®è¯¥å®¹å™¨æœ€å¤šåªèƒ½ä½¿ç”¨ 50M çš„å†…å­˜ç©ºé—´</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                reservations          </span><span class="token comment" style="color:#999988;font-style:italic"># è®¾ç½®ä¸ºå®¹å™¨é¢„ç•™çš„ç³»ç»Ÿèµ„æº(éšæ—¶å¯ç”¨)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token key atrule" style="color:#00a4db">cpus</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0.2&quot;</span><span class="token plain">           </span><span class="token comment" style="color:#999988;font-style:italic"># ä¸ºè¯¥å®¹å™¨ä¿ç•™ 20% çš„ CPU</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 20M           </span><span class="token comment" style="color:#999988;font-style:italic"># ä¸ºè¯¥å®¹å™¨ä¿ç•™ 20M çš„å†…å­˜ç©ºé—´</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            restart_policy        </span><span class="token comment" style="color:#999988;font-style:italic"># å®šä¹‰å®¹å™¨é‡å¯ç­–ç•¥, ç”¨äºä»£æ›¿ restart å‚æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                condition             </span><span class="token comment" style="color:#999988;font-style:italic"># å®šä¹‰å®¹å™¨é‡å¯ç­–ç•¥(æ¥å—ä¸‰ä¸ªå‚æ•°)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    none                  </span><span class="token comment" style="color:#999988;font-style:italic"># ä¸å°è¯•é‡å¯</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    on</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">failure            </span><span class="token comment" style="color:#999988;font-style:italic"># åªæœ‰å½“å®¹å™¨å†…éƒ¨åº”ç”¨ç¨‹åºå‡ºç°é—®é¢˜æ‰ä¼šé‡å¯</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    any                   </span><span class="token comment" style="color:#999988;font-style:italic"># æ— è®ºå¦‚ä½•éƒ½ä¼šå°è¯•é‡å¯(é»˜è®¤)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                delay                 </span><span class="token comment" style="color:#999988;font-style:italic"># å°è¯•é‡å¯çš„é—´éš”æ—¶é—´(é»˜è®¤ä¸º 0s)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                max_attempts          </span><span class="token comment" style="color:#999988;font-style:italic"># å°è¯•é‡å¯æ¬¡æ•°(é»˜è®¤ä¸€ç›´å°è¯•é‡å¯)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                window                </span><span class="token comment" style="color:#999988;font-style:italic"># æ£€æŸ¥é‡å¯æ˜¯å¦æˆåŠŸä¹‹å‰çš„ç­‰å¾…æ—¶é—´(å³å¦‚æœå®¹å™¨å¯åŠ¨äº†, éš”å¤šå°‘ç§’ä¹‹åå»æ£€æµ‹å®¹å™¨æ˜¯å¦æ­£å¸¸, é»˜è®¤ 0s)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            update_config         </span><span class="token comment" style="color:#999988;font-style:italic"># ç”¨äºé…ç½®æ»šåŠ¨æ›´æ–°é…ç½®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                parallelism           </span><span class="token comment" style="color:#999988;font-style:italic"># ä¸€æ¬¡æ€§æ›´æ–°çš„å®¹å™¨æ•°é‡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                delay                 </span><span class="token comment" style="color:#999988;font-style:italic"># æ›´æ–°ä¸€ç»„å®¹å™¨ä¹‹é—´çš„é—´éš”æ—¶é—´</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                failure_action        </span><span class="token comment" style="color:#999988;font-style:italic"># å®šä¹‰æ›´æ–°å¤±è´¥çš„ç­–ç•¥</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    continue              </span><span class="token comment" style="color:#999988;font-style:italic"># ç»§ç»­æ›´æ–°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    rollback              </span><span class="token comment" style="color:#999988;font-style:italic"># å›æ»šæ›´æ–°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    pause                 </span><span class="token comment" style="color:#999988;font-style:italic"># æš‚åœæ›´æ–°(é»˜è®¤)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                monitor               </span><span class="token comment" style="color:#999988;font-style:italic"># æ¯æ¬¡æ›´æ–°åçš„æŒç»­æ—¶é—´ä»¥ç›‘è§†æ›´æ–°æ˜¯å¦å¤±è´¥(å•ä½: ns|us|ms|s|m|h) (é»˜è®¤ä¸º0)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                max_failure_ratio     </span><span class="token comment" style="color:#999988;font-style:italic"># å›æ»šæœŸé—´å®¹å¿çš„å¤±è´¥ç‡(é»˜è®¤å€¼ä¸º0)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                order                 </span><span class="token comment" style="color:#999988;font-style:italic"># v3.4 ç‰ˆæœ¬ä¸­æ–°å¢çš„å‚æ•°, å›æ»šæœŸé—´çš„æ“ä½œé¡ºåº</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    stop</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">first            </span><span class="token comment" style="color:#999988;font-style:italic">#æ—§ä»»åŠ¡åœ¨å¯åŠ¨æ–°ä»»åŠ¡ä¹‹å‰åœæ­¢(é»˜è®¤)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    start</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">first           </span><span class="token comment" style="color:#999988;font-style:italic">#é¦–å…ˆå¯åŠ¨æ–°ä»»åŠ¡, å¹¶ä¸”æ­£åœ¨è¿è¡Œçš„ä»»åŠ¡æš‚æ—¶é‡å </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            rollback_config       </span><span class="token comment" style="color:#999988;font-style:italic"># v3.7 ç‰ˆæœ¬ä¸­æ–°å¢çš„å‚æ•°, ç”¨äºå®šä¹‰åœ¨ update_config æ›´æ–°å¤±è´¥çš„å›æ»šç­–ç•¥</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                parallelism           </span><span class="token comment" style="color:#999988;font-style:italic"># ä¸€æ¬¡å›æ»šçš„å®¹å™¨æ•°, å¦‚æœè®¾ç½®ä¸º0, åˆ™æ‰€æœ‰å®¹å™¨åŒæ—¶å›æ»š</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                delay                 </span><span class="token comment" style="color:#999988;font-style:italic"># æ¯ä¸ªç»„å›æ»šä¹‹é—´çš„æ—¶é—´é—´éš”(é»˜è®¤ä¸º0)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                failure_action        </span><span class="token comment" style="color:#999988;font-style:italic"># å®šä¹‰å›æ»šå¤±è´¥çš„ç­–ç•¥</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    continue              </span><span class="token comment" style="color:#999988;font-style:italic"># ç»§ç»­å›æ»š</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    pause                 </span><span class="token comment" style="color:#999988;font-style:italic"># æš‚åœå›æ»š</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                monitor               </span><span class="token comment" style="color:#999988;font-style:italic"># æ¯æ¬¡å›æ»šä»»åŠ¡åçš„æŒç»­æ—¶é—´ä»¥ç›‘è§†å¤±è´¥(å•ä½: ns|us|ms|s|m|h) (é»˜è®¤ä¸º0)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                max_failure_ratio     </span><span class="token comment" style="color:#999988;font-style:italic"># å›æ»šæœŸé—´å®¹å¿çš„å¤±è´¥ç‡(é»˜è®¤å€¼0)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                order                 </span><span class="token comment" style="color:#999988;font-style:italic"># å›æ»šæœŸé—´çš„æ“ä½œé¡ºåº</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    stop</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">first            </span><span class="token comment" style="color:#999988;font-style:italic"># æ—§ä»»åŠ¡åœ¨å¯åŠ¨æ–°ä»»åŠ¡ä¹‹å‰åœæ­¢(é»˜è®¤)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    start</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">first           </span><span class="token comment" style="color:#999988;font-style:italic"># é¦–å…ˆå¯åŠ¨æ–°ä»»åŠ¡, å¹¶ä¸”æ­£åœ¨è¿è¡Œçš„ä»»åŠ¡æš‚æ—¶é‡å </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* æ³¨æ„ï¼šæ”¯æŒ docker</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">compose up å’Œ docker</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">compose run ä½†ä¸æ”¯æŒ docker stack deploy çš„å­é€‰é¡¹security_opt  container_name  devices  tmpfs  stop_signal  links    cgroup_parent etwork_mode  external_links  restart  build  userns_mode  sysctls</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        devices               </span><span class="token comment" style="color:#999988;font-style:italic"># æŒ‡å®šè®¾å¤‡æ˜ å°„åˆ—è¡¨ (ç­‰åŒäº docker run --device çš„ä½œç”¨)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        depends_on            </span><span class="token comment" style="color:#999988;font-style:italic"># å®šä¹‰å®¹å™¨å¯åŠ¨é¡ºåº (æ­¤é€‰é¡¹è§£å†³äº†å®¹å™¨ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œ æ­¤é€‰é¡¹åœ¨ v3 ç‰ˆæœ¬ä¸­ ä½¿ç”¨ swarm éƒ¨ç½²æ—¶å°†å¿½ç•¥è¯¥é€‰é¡¹)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        dns                   </span><span class="token comment" style="color:#999988;font-style:italic"># è®¾ç½® DNS åœ°å€(ç­‰åŒäº docker run --dns çš„ä½œç”¨)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        dns_search            </span><span class="token comment" style="color:#999988;font-style:italic"># è®¾ç½® DNS æœç´¢åŸŸ(ç­‰åŒäº docker run --dns-search çš„ä½œç”¨)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        tmpfs                 </span><span class="token comment" style="color:#999988;font-style:italic"># v2 ç‰ˆæœ¬ä»¥ä¸Š, æŒ‚è½½ç›®å½•åˆ°å®¹å™¨ä¸­, ä½œä¸ºå®¹å™¨çš„ä¸´æ—¶æ–‡ä»¶ç³»ç»Ÿ(ç­‰åŒäº docker run --tmpfs çš„ä½œç”¨, åœ¨ä½¿ç”¨ swarm éƒ¨ç½²æ—¶å°†å¿½ç•¥è¯¥é€‰é¡¹)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        entrypoint            </span><span class="token comment" style="color:#999988;font-style:italic"># è¦†ç›–å®¹å™¨çš„é»˜è®¤ entrypoint æŒ‡ä»¤ (ç­‰åŒäº docker run --entrypoint çš„ä½œç”¨)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        env_file              </span><span class="token comment" style="color:#999988;font-style:italic"># ä»æŒ‡å®šæ–‡ä»¶ä¸­è¯»å–å˜é‡è®¾ç½®ä¸ºå®¹å™¨ä¸­çš„ç¯å¢ƒå˜é‡, å¯ä»¥æ˜¯å•ä¸ªå€¼æˆ–è€…ä¸€ä¸ªæ–‡ä»¶åˆ—è¡¨, å¦‚æœå¤šä¸ªæ–‡ä»¶ä¸­çš„å˜é‡é‡ååˆ™åé¢çš„å˜é‡è¦†ç›–å‰é¢çš„å˜é‡, environment çš„å€¼è¦†ç›– env_file çš„å€¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            æ–‡ä»¶æ ¼å¼ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                RACK_ENV=development</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        environment           </span><span class="token comment" style="color:#999988;font-style:italic"># è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œ environment çš„å€¼å¯ä»¥è¦†ç›– env_file çš„å€¼ (ç­‰åŒäº docker run --env çš„ä½œç”¨)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        expose                </span><span class="token comment" style="color:#999988;font-style:italic"># æš´éœ²ç«¯å£, ä½†æ˜¯ä¸èƒ½å’Œå®¿ä¸»æœºå»ºç«‹æ˜ å°„å…³ç³», ç±»ä¼¼äº Dockerfile çš„ EXPOSE æŒ‡ä»¤</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        external_links        </span><span class="token comment" style="color:#999988;font-style:italic"># è¿æ¥ä¸åœ¨ docker-compose.yml ä¸­å®šä¹‰çš„å®¹å™¨æˆ–è€…ä¸åœ¨ compose ç®¡ç†çš„å®¹å™¨(docker run å¯åŠ¨çš„å®¹å™¨, åœ¨ v3 ç‰ˆæœ¬ä¸­ä½¿ç”¨ swarm éƒ¨ç½²æ—¶å°†å¿½ç•¥è¯¥é€‰é¡¹)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        extra_hosts           </span><span class="token comment" style="color:#999988;font-style:italic"># æ·»åŠ  host è®°å½•åˆ°å®¹å™¨ä¸­çš„ /etc/hosts ä¸­ (ç­‰åŒäº docker run --add-host çš„ä½œç”¨)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        healthcheck           </span><span class="token comment" style="color:#999988;font-style:italic"># v2.1 ä»¥ä¸Šç‰ˆæœ¬, å®šä¹‰å®¹å™¨å¥åº·çŠ¶æ€æ£€æŸ¥, ç±»ä¼¼äº Dockerfile çš„ HEALTHCHECK æŒ‡ä»¤</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            test                  </span><span class="token comment" style="color:#999988;font-style:italic"># æ£€æŸ¥å®¹å™¨æ£€æŸ¥çŠ¶æ€çš„å‘½ä»¤, è¯¥é€‰é¡¹å¿…é¡»æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–è€…åˆ—è¡¨, ç¬¬ä¸€é¡¹å¿…é¡»æ˜¯ NONE, CMD æˆ– CMD-SHELL, å¦‚æœå…¶æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²åˆ™ç›¸å½“äº CMD-SHELL åŠ è¯¥å­—ç¬¦ä¸²</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                NONE                  </span><span class="token comment" style="color:#999988;font-style:italic"># ç¦ç”¨å®¹å™¨çš„å¥åº·çŠ¶æ€æ£€æµ‹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                CMD                   </span><span class="token comment" style="color:#999988;font-style:italic"># test: [&quot;CMD&quot;, &quot;curl&quot;, &quot;-f&quot;, &quot;http://127.0.0.1&quot;]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                CMD</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">SHELL             </span><span class="token comment" style="color:#999988;font-style:italic"># test: [&quot;CMD-SHELL&quot;, &quot;curl -f http://127.0.0.1 || exit 1&quot;] æˆ–è€…ã€€test: curl -f https://localhost || exit 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">interval</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 1m30s       </span><span class="token comment" style="color:#999988;font-style:italic"># æ¯æ¬¡æ£€æŸ¥ä¹‹é—´çš„é—´éš”æ—¶é—´</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">timeout</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 10s          </span><span class="token comment" style="color:#999988;font-style:italic"># è¿è¡Œå‘½ä»¤çš„è¶…æ—¶æ—¶é—´</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">retries</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic"># é‡è¯•æ¬¡æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">start_period</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 40s     </span><span class="token comment" style="color:#999988;font-style:italic"># v3.4 ä»¥ä¸Šæ–°å¢çš„é€‰é¡¹, å®šä¹‰å®¹å™¨å¯åŠ¨æ—¶é—´é—´éš”</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">disable</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain">         </span><span class="token comment" style="color:#999988;font-style:italic"># true æˆ– false, è¡¨ç¤ºæ˜¯å¦ç¦ç”¨å¥åº·çŠ¶æ€æ£€æµ‹å’Œã€€test: NONE ç›¸åŒ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        image                 </span><span class="token comment" style="color:#999988;font-style:italic"># æŒ‡å®š docker é•œåƒ, å¯ä»¥æ˜¯è¿œç¨‹ä»“åº“é•œåƒã€æœ¬åœ°é•œåƒ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        init                  </span><span class="token comment" style="color:#999988;font-style:italic"># v3.7 ä¸­æ–°å¢çš„å‚æ•°, true æˆ– false è¡¨ç¤ºæ˜¯å¦åœ¨å®¹å™¨ä¸­è¿è¡Œä¸€ä¸ª init, å®ƒæ¥æ”¶ä¿¡å·å¹¶ä¼ é€’ç»™è¿›ç¨‹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        isolation             </span><span class="token comment" style="color:#999988;font-style:italic"># éš”ç¦»å®¹å™¨æŠ€æœ¯, åœ¨ Linux ä¸­ä»…æ”¯æŒ default å€¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        labels                </span><span class="token comment" style="color:#999988;font-style:italic"># ä½¿ç”¨ Docker æ ‡ç­¾å°†å…ƒæ•°æ®æ·»åŠ åˆ°å®¹å™¨, ä¸ Dockerfile ä¸­çš„ LABELS ç±»ä¼¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        links                 </span><span class="token comment" style="color:#999988;font-style:italic"># é“¾æ¥åˆ°å…¶å®ƒæœåŠ¡ä¸­çš„å®¹å™¨, è¯¥é€‰é¡¹æ˜¯ docker å†å²é—ç•™çš„é€‰é¡¹, ç›®å‰å·²è¢«ç”¨æˆ·è‡ªå®šä¹‰ç½‘ç»œåç§°ç©ºé—´å–ä»£, æœ€ç»ˆæœ‰å¯èƒ½è¢«åºŸå¼ƒ (åœ¨ä½¿ç”¨ swarm éƒ¨ç½²æ—¶å°†å¿½ç•¥è¯¥é€‰é¡¹)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        logging               </span><span class="token comment" style="color:#999988;font-style:italic"># è®¾ç½®å®¹å™¨æ—¥å¿—æœåŠ¡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            driver                </span><span class="token comment" style="color:#999988;font-style:italic"># æŒ‡å®šæ—¥å¿—è®°å½•é©±åŠ¨ç¨‹åº, é»˜è®¤ json-file (ç­‰åŒäº docker run --log-driver çš„ä½œç”¨)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            options               </span><span class="token comment" style="color:#999988;font-style:italic"># æŒ‡å®šæ—¥å¿—çš„ç›¸å…³å‚æ•° (ç­‰åŒäº docker run --log-opt çš„ä½œç”¨)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                max</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">size              </span><span class="token comment" style="color:#999988;font-style:italic"># è®¾ç½®å•ä¸ªæ—¥å¿—æ–‡ä»¶çš„å¤§å°, å½“åˆ°è¾¾è¿™ä¸ªå€¼åä¼šè¿›è¡Œæ—¥å¿—æ»šåŠ¨æ“ä½œ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                max</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">file              </span><span class="token comment" style="color:#999988;font-style:italic"># æ—¥å¿—æ–‡ä»¶ä¿ç•™çš„æ•°é‡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        network_mode          </span><span class="token comment" style="color:#999988;font-style:italic"># æŒ‡å®šç½‘ç»œæ¨¡å¼ (ç­‰åŒäº docker run --net çš„ä½œç”¨, åœ¨ä½¿ç”¨ swarm éƒ¨ç½²æ—¶å°†å¿½ç•¥è¯¥é€‰é¡¹)        </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        networks              </span><span class="token comment" style="color:#999988;font-style:italic"># å°†å®¹å™¨åŠ å…¥æŒ‡å®šç½‘ç»œ (ç­‰åŒäº docker network connect çš„ä½œç”¨), networks å¯ä»¥ä½äº compose æ–‡ä»¶é¡¶çº§é”®å’Œ services é”®çš„äºŒçº§é”®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            aliases               </span><span class="token comment" style="color:#999988;font-style:italic"># åŒä¸€ç½‘ç»œä¸Šçš„å®¹å™¨å¯ä»¥ä½¿ç”¨æœåŠ¡åç§°æˆ–åˆ«åè¿æ¥åˆ°å…¶ä¸­ä¸€ä¸ªæœåŠ¡çš„å®¹å™¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ipv4_address      </span><span class="token comment" style="color:#999988;font-style:italic"># IP V4 æ ¼å¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ipv6_address      </span><span class="token comment" style="color:#999988;font-style:italic"># IP V6 æ ¼å¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">pid</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;host&#x27;</span><span class="token plain">           </span><span class="token comment" style="color:#999988;font-style:italic"># å…±äº«å®¿ä¸»æœºçš„ è¿›ç¨‹ç©ºé—´(PID)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ports                 </span><span class="token comment" style="color:#999988;font-style:italic"># å»ºç«‹å®¿ä¸»æœºå’Œå®¹å™¨ä¹‹é—´çš„ç«¯å£æ˜ å°„å…³ç³», ports æ”¯æŒä¸¤ç§è¯­æ³•æ ¼å¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">SHORT è¯­æ³•æ ¼å¼ç¤ºä¾‹</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;3000&quot;</span><span class="token plain">                            </span><span class="token comment" style="color:#999988;font-style:italic"># æš´éœ²å®¹å™¨çš„ 3000 ç«¯å£, å®¿ä¸»æœºçš„ç«¯å£ç”± docker éšæœºæ˜ å°„ä¸€ä¸ªæ²¡æœ‰è¢«å ç”¨çš„ç«¯å£</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;3000-3005&quot;</span><span class="token plain">                       </span><span class="token comment" style="color:#999988;font-style:italic"># æš´éœ²å®¹å™¨çš„ 3000 åˆ° 3005 ç«¯å£, å®¿ä¸»æœºçš„ç«¯å£ç”± docker éšæœºæ˜ å°„æ²¡æœ‰è¢«å ç”¨çš„ç«¯å£</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;8000:8000&quot;</span><span class="token plain">                       </span><span class="token comment" style="color:#999988;font-style:italic"># å®¹å™¨çš„ 8000 ç«¯å£å’Œå®¿ä¸»æœºçš„ 8000 ç«¯å£å»ºç«‹æ˜ å°„å…³ç³»</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;9090-9091:8080-8081&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;127.0.0.1:8001:8001&quot;</span><span class="token plain">             </span><span class="token comment" style="color:#999988;font-style:italic"># æŒ‡å®šæ˜ å°„å®¿ä¸»æœºçš„æŒ‡å®šåœ°å€çš„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;127.0.0.1:5000-5010:5000-5010&quot;</span><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;6060:6060/udp&quot;</span><span class="token plain">                   </span><span class="token comment" style="color:#999988;font-style:italic"># æŒ‡å®šåè®®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            LONG è¯­æ³•æ ¼å¼ç¤ºä¾‹</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">(v3.2 æ–°å¢çš„è¯­æ³•æ ¼å¼)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">target</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain">                    </span><span class="token comment" style="color:#999988;font-style:italic"># å®¹å™¨ç«¯å£</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      </span><span class="token key atrule" style="color:#00a4db">published</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8080</span><span class="token plain">               </span><span class="token comment" style="color:#999988;font-style:italic"># å®¿ä¸»æœºç«¯å£</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      </span><span class="token key atrule" style="color:#00a4db">protocol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> tcp                 </span><span class="token comment" style="color:#999988;font-style:italic"># åè®®ç±»å‹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      </span><span class="token key atrule" style="color:#00a4db">mode</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> host                    </span><span class="token comment" style="color:#999988;font-style:italic"># host åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šå‘å¸ƒä¸»æœºç«¯å£,  ingress å¯¹äºç¾¤æ¨¡å¼ç«¯å£è¿›è¡Œè´Ÿè½½å‡è¡¡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        secrets               </span><span class="token comment" style="color:#999988;font-style:italic"># ä¸çŸ¥é“æ€ä¹ˆç”¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        security_opt          </span><span class="token comment" style="color:#999988;font-style:italic"># ä¸ºæ¯ä¸ªå®¹å™¨è¦†ç›–é»˜è®¤çš„æ ‡ç­¾ (åœ¨ä½¿ç”¨ swarm éƒ¨ç½²æ—¶å°†å¿½ç•¥è¯¥é€‰é¡¹)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        stop_grace_period     </span><span class="token comment" style="color:#999988;font-style:italic"># æŒ‡å®šåœ¨å‘é€äº† SIGTERM ä¿¡å·ä¹‹å, å®¹å™¨ç­‰å¾…å¤šå°‘ç§’ä¹‹åé€€å‡º(é»˜è®¤ 10s)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        stop_signal           </span><span class="token comment" style="color:#999988;font-style:italic"># æŒ‡å®šåœæ­¢å®¹å™¨å‘é€çš„ä¿¡å· (é»˜è®¤ä¸º SIGTERM ç›¸å½“äº kill PID; SIGKILL ç›¸å½“äº kill -9 PID; åœ¨ä½¿ç”¨ swarm éƒ¨ç½²æ—¶å°†å¿½ç•¥è¯¥é€‰é¡¹)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sysctls               </span><span class="token comment" style="color:#999988;font-style:italic"># è®¾ç½®å®¹å™¨ä¸­çš„å†…æ ¸å‚æ•° (åœ¨ä½¿ç”¨ swarm éƒ¨ç½²æ—¶å°†å¿½ç•¥è¯¥é€‰é¡¹)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ulimits               </span><span class="token comment" style="color:#999988;font-style:italic"># è®¾ç½®å®¹å™¨çš„ limit</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        userns_mode           </span><span class="token comment" style="color:#999988;font-style:italic"># å¦‚æœDockerå®ˆæŠ¤ç¨‹åºé…ç½®äº†ç”¨æˆ·åç§°ç©ºé—´, åˆ™ç¦ç”¨æ­¤æœåŠ¡çš„ç”¨æˆ·åç§°ç©ºé—´ (åœ¨ä½¿ç”¨ swarm éƒ¨ç½²æ—¶å°†å¿½ç•¥è¯¥é€‰é¡¹)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        volumes               </span><span class="token comment" style="color:#999988;font-style:italic"># å®šä¹‰å®¹å™¨å’Œå®¿ä¸»æœºçš„å·æ˜ å°„å…³ç³», å…¶å’Œ networks ä¸€æ ·å¯ä»¥ä½äº services é”®çš„äºŒçº§é”®å’Œ compose é¡¶çº§é”®, å¦‚æœéœ€è¦è·¨æœåŠ¡é—´ä½¿ç”¨åˆ™åœ¨é¡¶çº§é”®å®šä¹‰, åœ¨ services ä¸­å¼•ç”¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">SHORT è¯­æ³•æ ¼å¼ç¤ºä¾‹</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> /var/lib/mysql                </span><span class="token comment" style="color:#999988;font-style:italic"># æ˜ å°„å®¹å™¨å†…çš„ /var/lib/mysql åˆ°å®¿ä¸»æœºçš„ä¸€ä¸ªéšæœºç›®å½•ä¸­</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> /opt/data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/var/lib/mysql      </span><span class="token comment" style="color:#999988;font-style:italic"># æ˜ å°„å®¹å™¨å†…çš„ /var/lib/mysql åˆ°å®¿ä¸»æœºçš„ /opt/data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> ./cache</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/tmp/cache            </span><span class="token comment" style="color:#999988;font-style:italic"># æ˜ å°„å®¹å™¨å†…çš„ /var/lib/mysql åˆ°å®¿ä¸»æœº compose æ–‡ä»¶æ‰€åœ¨çš„ä½ç½®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> ~/configs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/etc/configs/</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">ro    </span><span class="token comment" style="color:#999988;font-style:italic"># æ˜ å°„å®¹å™¨å®¿ä¸»æœºçš„ç›®å½•åˆ°å®¹å™¨ä¸­å», æƒé™åªè¯»</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> datavolume</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/var/lib/mysql     </span><span class="token comment" style="color:#999988;font-style:italic"># datavolume ä¸º volumes é¡¶çº§é”®å®šä¹‰çš„ç›®å½•, åœ¨æ­¤å¤„ç›´æ¥è°ƒç”¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            LONG è¯­æ³•æ ¼å¼ç¤ºä¾‹</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">(v3.2 æ–°å¢çš„è¯­æ³•æ ¼å¼)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;3.2&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token key atrule" style="color:#00a4db">services</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token key atrule" style="color:#00a4db">web</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">alpine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;80:80&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> volume                  </span><span class="token comment" style="color:#999988;font-style:italic"># mount çš„ç±»å‹, å¿…é¡»æ˜¯ bindã€volume æˆ– tmpfs</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token key atrule" style="color:#00a4db">source</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> mydata              </span><span class="token comment" style="color:#999988;font-style:italic"># å®¿ä¸»æœºç›®å½•</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token key atrule" style="color:#00a4db">target</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /data               </span><span class="token comment" style="color:#999988;font-style:italic"># å®¹å™¨ç›®å½•</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token key atrule" style="color:#00a4db">volume</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">                     </span><span class="token comment" style="color:#999988;font-style:italic"># é…ç½®é¢å¤–çš„é€‰é¡¹, å…¶ key å¿…é¡»å’Œ type çš„å€¼ç›¸åŒ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    </span><span class="token key atrule" style="color:#00a4db">nocopy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic"># volume é¢å¤–çš„é€‰é¡¹, åœ¨åˆ›å»ºå·æ—¶ç¦ç”¨ä»å®¹å™¨å¤åˆ¶æ•°æ®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> bind                    </span><span class="token comment" style="color:#999988;font-style:italic"># volume æ¨¡å¼åªæŒ‡å®šå®¹å™¨è·¯å¾„å³å¯, å®¿ä¸»æœºè·¯å¾„éšæœºç”Ÿæˆ; bind éœ€è¦æŒ‡å®šå®¹å™¨å’Œæ•°æ®æœºçš„æ˜ å°„è·¯å¾„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token key atrule" style="color:#00a4db">source</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ./static</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token key atrule" style="color:#00a4db">target</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /opt/app/static</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token key atrule" style="color:#00a4db">read_only</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain">             </span><span class="token comment" style="color:#999988;font-style:italic"># è®¾ç½®æ–‡ä»¶ç³»ç»Ÿä¸ºåªè¯»æ–‡ä»¶ç³»ç»Ÿ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token key atrule" style="color:#00a4db">mydata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">                                 </span><span class="token comment" style="color:#999988;font-style:italic"># å®šä¹‰åœ¨ volume, å¯åœ¨æ‰€æœ‰æœåŠ¡ä¸­è°ƒç”¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        restart               </span><span class="token comment" style="color:#999988;font-style:italic"># å®šä¹‰å®¹å™¨é‡å¯ç­–ç•¥(åœ¨ä½¿ç”¨ swarm éƒ¨ç½²æ—¶å°†å¿½ç•¥è¯¥é€‰é¡¹, åœ¨ swarm ä½¿ç”¨ restart_policy ä»£æ›¿ restart)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            no                    </span><span class="token comment" style="color:#999988;font-style:italic"># ç¦æ­¢è‡ªåŠ¨é‡å¯å®¹å™¨(é»˜è®¤)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            always                </span><span class="token comment" style="color:#999988;font-style:italic"># æ— è®ºå¦‚ä½•å®¹å™¨éƒ½ä¼šé‡å¯</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            on</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">failure            </span><span class="token comment" style="color:#999988;font-style:italic"># å½“å‡ºç° on-failure æŠ¥é”™æ—¶, å®¹å™¨é‡æ–°å¯åŠ¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        å…¶ä»–é€‰é¡¹ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            domainname</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> hostname</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ipc</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> mac_address</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> privileged</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> read_only</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> shm_size</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> stdin_open</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tty</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> user</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> working_dir</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ä¸Šé¢è¿™äº›é€‰é¡¹éƒ½åªæ¥å—å•ä¸ªå€¼å’Œ docker run çš„å¯¹åº”å‚æ•°ç±»ä¼¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        å¯¹äºå€¼ä¸ºæ—¶é—´çš„å¯æ¥å—çš„å€¼ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            2.5s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            10s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            1m30s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            2h32m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            5h34m56s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">æ—¶é—´å•ä½</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> us</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ms</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> mï¼Œ h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        å¯¹äºå€¼ä¸ºå¤§å°çš„å¯æ¥å—çš„å€¼ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            2b</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            1024kb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            2048k</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            300m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            1gb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">å•ä½</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> k</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> m</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> g æˆ–è€… kb</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> mb</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> gb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    networks          </span><span class="token comment" style="color:#999988;font-style:italic"># å®šä¹‰ networks ä¿¡æ¯</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        driver                </span><span class="token comment" style="color:#999988;font-style:italic"># æŒ‡å®šç½‘ç»œæ¨¡å¼, å¤§å¤šæ•°æƒ…å†µä¸‹, å®ƒ bridge äºå•ä¸ªä¸»æœºå’Œ overlay Swarm ä¸Š</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            bridge                </span><span class="token comment" style="color:#999988;font-style:italic"># Docker é»˜è®¤ä½¿ç”¨ bridge è¿æ¥å•ä¸ªä¸»æœºä¸Šçš„ç½‘ç»œ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            overlay               </span><span class="token comment" style="color:#999988;font-style:italic"># overlay é©±åŠ¨ç¨‹åºåˆ›å»ºä¸€ä¸ªè·¨å¤šä¸ªèŠ‚ç‚¹å‘½åçš„ç½‘ç»œ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            host                  </span><span class="token comment" style="color:#999988;font-style:italic"># å…±äº«ä¸»æœºç½‘ç»œåç§°ç©ºé—´(ç­‰åŒäº docker run --net=host)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            none                  </span><span class="token comment" style="color:#999988;font-style:italic"># ç­‰åŒäº docker run --net=none</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        driver_opts           </span><span class="token comment" style="color:#999988;font-style:italic"># v3.2ä»¥ä¸Šç‰ˆæœ¬, ä¼ é€’ç»™é©±åŠ¨ç¨‹åºçš„å‚æ•°, è¿™äº›å‚æ•°å–å†³äºé©±åŠ¨ç¨‹åº</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        attachable            </span><span class="token comment" style="color:#999988;font-style:italic"># driver ä¸º overlay æ—¶ä½¿ç”¨, å¦‚æœè®¾ç½®ä¸º true åˆ™é™¤äº†æœåŠ¡ä¹‹å¤–ï¼Œç‹¬ç«‹å®¹å™¨ä¹Ÿå¯ä»¥é™„åŠ åˆ°è¯¥ç½‘ç»œ; å¦‚æœç‹¬ç«‹å®¹å™¨è¿æ¥åˆ°è¯¥ç½‘ç»œï¼Œåˆ™å®ƒå¯ä»¥ä¸å…¶ä»– Docker å®ˆæŠ¤è¿›ç¨‹è¿æ¥åˆ°çš„è¯¥ç½‘ç»œçš„æœåŠ¡å’Œç‹¬ç«‹å®¹å™¨è¿›è¡Œé€šä¿¡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ipam                  </span><span class="token comment" style="color:#999988;font-style:italic"># è‡ªå®šä¹‰ IPAM é…ç½®. è¿™æ˜¯ä¸€ä¸ªå…·æœ‰å¤šä¸ªå±æ€§çš„å¯¹è±¡, æ¯ä¸ªå±æ€§éƒ½æ˜¯å¯é€‰çš„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            driver                </span><span class="token comment" style="color:#999988;font-style:italic"># IPAM é©±åŠ¨ç¨‹åº, bridge æˆ–è€… default</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            config                </span><span class="token comment" style="color:#999988;font-style:italic"># é…ç½®é¡¹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                subnet                </span><span class="token comment" style="color:#999988;font-style:italic"># CIDRæ ¼å¼çš„å­ç½‘ï¼Œè¡¨ç¤ºè¯¥ç½‘ç»œçš„ç½‘æ®µ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        external              </span><span class="token comment" style="color:#999988;font-style:italic"># å¤–éƒ¨ç½‘ç»œ, å¦‚æœè®¾ç½®ä¸º true åˆ™ docker-compose up ä¸ä¼šå°è¯•åˆ›å»ºå®ƒ, å¦‚æœå®ƒä¸å­˜åœ¨åˆ™å¼•å‘é”™è¯¯</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name                  </span><span class="token comment" style="color:#999988;font-style:italic"># v3.5 ä»¥ä¸Šç‰ˆæœ¬, ä¸ºæ­¤ç½‘ç»œè®¾ç½®åç§°</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ç¤ºä¾‹">ç¤ºä¾‹<a href="#ç¤ºä¾‹" class="hash-link" aria-label="Direct link to ç¤ºä¾‹" title="Direct link to ç¤ºä¾‹">â€‹</a></h2><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ç¤ºä¾‹ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">compose up ä»¥ä¾èµ–é¡ºåºå¯åŠ¨æœåŠ¡ï¼Œä¸‹é¢ä¾‹å­ä¸­ redis å’Œ db æœåŠ¡åœ¨ web å¯åŠ¨å‰å¯åŠ¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">é»˜è®¤æƒ…å†µä¸‹ä½¿ç”¨ docker</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">compose up web è¿™æ ·çš„æ–¹å¼å¯åŠ¨ web æœåŠ¡æ—¶ï¼Œä¹Ÿä¼šå¯åŠ¨ redis å’Œ db ä¸¤ä¸ªæœåŠ¡ï¼Œå› ä¸ºåœ¨é…ç½®æ–‡ä»¶ä¸­å®šä¹‰äº†ä¾èµ–å…³ç³»</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;3&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">services</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">web</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">build</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">depends_on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> db     </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> redis </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">redis</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> redis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">db</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> postgres                            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">ç¤ºä¾‹</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;3.7&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">services</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">test</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">1.14</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">alpine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">container_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> mynginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ifconfig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">networks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">app_net</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">                                </span><span class="token comment" style="color:#999988;font-style:italic"># è°ƒç”¨ä¸‹é¢ networks å®šä¹‰çš„ app_net ç½‘ç»œ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">ipv4_address</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 172.16.238.10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">networks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app_net</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">driver</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> bridge</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">ipam</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">driver</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">subnet</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 172.16.238.0/24</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">æ–‡ä»¶æ ¼å¼ç¤ºä¾‹ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;3&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">services</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">redis</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> redis</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">alpine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;6379&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">networks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> frontend</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">deploy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">update_config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">parallelism</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">delay</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 10s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">restart_policy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">condition</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> on</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">failure</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">db</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> postgres</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">9.4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> db</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/var/lib/postgresql/data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">networks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> backend</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">deploy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">placement</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">constraints</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">node.role == manager</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥<a href="#å‚è€ƒé“¾æ¥" class="hash-link" aria-label="Direct link to å‚è€ƒé“¾æ¥" title="Direct link to å‚è€ƒé“¾æ¥">â€‹</a></h2><ul><li>Docker Compose Documentationï¼š<a href="https://docs.docker.com/compose/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/compose/</a></li><li>compose-fileï¼š<a href="https://docs.docker.com/compose/compose-file/#compose-file-structure-and-examples" target="_blank" rel="noopener noreferrer">https://docs.docker.com/compose/compose-file/#compose-file-structure-and-examples</a></li><li>cnblogs @zhujingzhi ï¼š<a href="https://www.cnblogs.com/zhujingzhi/p/9786622.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/zhujingzhi/p/9786622.html</a></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/CloudNative/Docker/Docker Compose.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/CloudNative/Docker/Docker Basic"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Docker Basic</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/CloudNative/Docker/Docker Network"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Docker Network</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#docker-compose-ç®€ä»‹" class="table-of-contents__link toc-highlight">Docker Compose ç®€ä»‹</a></li><li><a href="#docker-compose-å®‰è£…" class="table-of-contents__link toc-highlight">Docker Compose å®‰è£…</a></li><li><a href="#docker-å¸¸ç”¨å‘½ä»¤åŠç»„åˆ" class="table-of-contents__link toc-highlight">Docker å¸¸ç”¨å‘½ä»¤åŠç»„åˆ</a><ul><li><a href="#docker-composeç›¸å…³å‘½ä»¤" class="table-of-contents__link toc-highlight">docker-composeç›¸å…³å‘½ä»¤</a></li><li><a href="#å¸¸ç”¨shellç»„åˆ" class="table-of-contents__link toc-highlight">å¸¸ç”¨shellç»„åˆ</a></li></ul></li><li><a href="#å¿«é€Ÿå…¥é—¨-compose--wordpress" class="table-of-contents__link toc-highlight">å¿«é€Ÿå…¥é—¨ Compose &amp; Wordpress</a></li><li><a href="#docker-compose-å‘½ä»¤ä¸é…ç½®è¯¦è§£" class="table-of-contents__link toc-highlight">Docker Compose å‘½ä»¤ä¸é…ç½®è¯¦è§£</a><ul><li><a href="#å¸¸ç”¨å‘½ä»¤å‚æ•°" class="table-of-contents__link toc-highlight">å¸¸ç”¨å‘½ä»¤å‚æ•°</a></li><li><a href="#æ¨¡æ¿é…ç½®æ–‡ä»¶" class="table-of-contents__link toc-highlight">æ¨¡æ¿é…ç½®æ–‡ä»¶</a></li></ul></li><li><a href="#ç¤ºä¾‹" class="table-of-contents__link toc-highlight">ç¤ºä¾‹</a></li><li><a href="#å‚è€ƒé“¾æ¥" class="table-of-contents__link toc-highlight">å‚è€ƒé“¾æ¥</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs Releases</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://agou-ops.cn/myDocs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Version 1.0<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://agou-ops.cn/myDocsv2" target="_blank" rel="noopener noreferrer" class="footer__link-item">Version 2.0<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://agou-ops.cn/myDocsv3" target="_blank" rel="noopener noreferrer" class="footer__link-item">Version 3.0<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://agou-ops.cn/myDocsv4" target="_blank" rel="noopener noreferrer" class="footer__link-item">â­ï¸Version 4.0<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://agou-ops.cn" target="_blank" rel="noopener noreferrer" class="footer__link-item">â­ï¸æˆ‘çš„åšå®¢<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/AGou-ops" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2023 AGou-ops' Documetation v4.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.755b355e.js"></script>
<script src="/assets/js/main.7f3bf5c4.js"></script>
</body>
</html>