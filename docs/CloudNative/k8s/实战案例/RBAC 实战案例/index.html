<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-CloudNative/k8s/å®æˆ˜æ¡ˆä¾‹/RBAC å®æˆ˜æ¡ˆä¾‹">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">ï¼ˆä¸€ï¼‰é€šè¿‡ç”¨æˆ·è´¦å·çš„æ–¹å¼åˆ†é…å•ç‹¬Namespaceçš„æƒé™ | AGou&#x27;s Docsv4</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.agou-ops.cn/docs/CloudNative/k8s/å®æˆ˜æ¡ˆä¾‹/RBAC å®æˆ˜æ¡ˆä¾‹"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="ï¼ˆä¸€ï¼‰é€šè¿‡ç”¨æˆ·è´¦å·çš„æ–¹å¼åˆ†é…å•ç‹¬Namespaceçš„æƒé™ | AGou&#x27;s Docsv4"><meta data-rh="true" name="description" content="1.æ¡ˆä¾‹æè¿°"><meta data-rh="true" property="og:description" content="1.æ¡ˆä¾‹æè¿°"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://docs.agou-ops.cn/docs/CloudNative/k8s/å®æˆ˜æ¡ˆä¾‹/RBAC å®æˆ˜æ¡ˆä¾‹"><link data-rh="true" rel="alternate" href="https://docs.agou-ops.cn/docs/CloudNative/k8s/å®æˆ˜æ¡ˆä¾‹/RBAC å®æˆ˜æ¡ˆä¾‹" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.agou-ops.cn/docs/CloudNative/k8s/å®æˆ˜æ¡ˆä¾‹/RBAC å®æˆ˜æ¡ˆä¾‹" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-KQED41RW95","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>




<script src="http://23.94.25.11:38080/script.js" async data-website-id="dc1ebecd-127f-4df7-bd12-bc3d0cc31998"></script><link rel="stylesheet" href="/assets/css/styles.6908ad1e.css">
<link rel="preload" href="/assets/js/runtime~main.769d471d.js" as="script">
<link rel="preload" href="/assets/js/main.cfb3537f.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Welcome to AGou&#x27;s Docs!" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.png" alt="Welcome to AGou&#x27;s Docs!" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">AGou&#x27;s Docsv4</b></a><a href="https://agou-ops.cn" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">âœ¨ æˆ‘çš„åšå®¢<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"> ğŸ“– ç›®å½•</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs">ğŸŒ² ç›®å½•æ ‘</a></li><li><hr style="margin: 0.3rem 0;"></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/category/äº‘åŸç”Ÿç›¸å…³">â˜ï¸ äº‘åŸç”Ÿç›¸å…³</a></li><li><a class="dropdown__link" href="/docs/category/linuxåŸºç¡€">ğŸ˜Š LinuxåŸºç¡€</a></li><li><a class="dropdown__link" href="/docs/category/ç¼–ç¨‹è¯­è¨€">â™¨ï¸ ç¼–ç¨‹è¯­è¨€</a></li><li><a class="dropdown__link" href="/docs/category/è„šæœ¬ç›¸å…³">ğŸ•¹ï¸ è„šæœ¬ç›¸å…³</a></li><li><a class="dropdown__link" href="/docs/category/é¢è¯•ç›¸å…³">ğŸ‘¨â€âš–ï¸ é¢è¯•ç›¸å…³</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">ç‰ˆæœ¬</a><ul class="dropdown__menu"><li><a href="https://agou-ops.cn/myDocs" target="_blank" rel="noopener noreferrer" class="dropdown__link">Ver1.0<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://agou-ops.cn/myDocsv2" target="_blank" rel="noopener noreferrer" class="dropdown__link">Ver2.0<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://agou-ops.cn/myDocsv3" target="_blank" rel="noopener noreferrer" class="dropdown__link">Ver3.0<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><a href="https://github.com/AGou-ops" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub ä»“åº“"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/"><img src="/img/logo.png" alt="Welcome to AGou&#x27;s Docs!" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.png" alt="Welcome to AGou&#x27;s Docs!" class="themedImage_ToTc themedImage--dark_i4oU"><b>AGou&#x27;s Docsv4</b></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/äº‘åŸç”Ÿç›¸å…³">äº‘åŸç”Ÿç›¸å…³</a><button aria-label="Toggle the collapsible sidebar category &#x27;äº‘åŸç”Ÿç›¸å…³&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/cicd">CICD</a><button aria-label="Toggle the collapsible sidebar category &#x27;CICD&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/cloudcomptering">CloudComptering</a><button aria-label="Toggle the collapsible sidebar category &#x27;CloudComptering&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/docker">Docker</a><button aria-label="Toggle the collapsible sidebar category &#x27;Docker&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/elfk">ELFK</a><button aria-label="Toggle the collapsible sidebar category &#x27;ELFK&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/prometheus">Prometheus</a><button aria-label="Toggle the collapsible sidebar category &#x27;Prometheus&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/category/k8s">k8s</a><button aria-label="Toggle the collapsible sidebar category &#x27;k8s&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/helm">Helm</a><button aria-label="Toggle the collapsible sidebar category &#x27;Helm&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/installation">Installation</a><button aria-label="Toggle the collapsible sidebar category &#x27;Installation&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/quicklystart">Quicklystart</a><button aria-label="Toggle the collapsible sidebar category &#x27;Quicklystart&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/category/å®æˆ˜æ¡ˆä¾‹">å®æˆ˜æ¡ˆä¾‹</a><button aria-label="Toggle the collapsible sidebar category &#x27;å®æˆ˜æ¡ˆä¾‹&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/CloudNative/k8s/å®æˆ˜æ¡ˆä¾‹/RBAC å®æˆ˜æ¡ˆä¾‹">ï¼ˆä¸€ï¼‰é€šè¿‡ç”¨æˆ·è´¦å·çš„æ–¹å¼åˆ†é…å•ç‹¬Namespaceçš„æƒé™</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CloudNative/k8s/å®æˆ˜æ¡ˆä¾‹/SpringCloudå¾®æœåŠ¡ç”µå•†ç³»ç»Ÿåœ¨Kubernetesé›†ç¾¤ä¸­ä¸Šçº¿è¯¦ç»†æ•™ç¨‹">SpringCloudå¾®æœåŠ¡ç”µå•†ç³»ç»Ÿåœ¨Kubernetesé›†ç¾¤ä¸­ä¸Šçº¿è¯¦ç»†æ•™ç¨‹</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CloudNative/k8s/å®æˆ˜æ¡ˆä¾‹/cert-managerè‡ªåŠ¨é¢å‘è¯ä¹¦">cert-managerè‡ªåŠ¨é¢å‘è¯ä¹¦</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CloudNative/k8s/å®æˆ˜æ¡ˆä¾‹/helmå®‰è£…zookeeperé›†ç¾¤">helmå®‰è£…zookeeperé›†ç¾¤</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CloudNative/k8s/å®æˆ˜æ¡ˆä¾‹/jenkinsç»“åˆ">jenkinsç»“åˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CloudNative/k8s/å®æˆ˜æ¡ˆä¾‹/k8sä¸­ä½¿ç”¨traefikï¼ˆåŸºç¡€ï¼‰">k8sä¸­ä½¿ç”¨traefikï¼ˆåŸºç¡€ï¼‰</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CloudNative/k8s/å®æˆ˜æ¡ˆä¾‹/k8så®‰è£…Apolloé…ç½®ä¸­å¿ƒ">k8så®‰è£…Apolloé…ç½®ä¸­å¿ƒ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CloudNative/k8s/å®æˆ˜æ¡ˆä¾‹/k8så®‰è£…MinIOå¯¹è±¡å­˜å‚¨">å•èŠ‚ç‚¹éƒ¨ç½²</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CloudNative/k8s/å®æˆ˜æ¡ˆä¾‹/ä½¿ç”¨CSR APIåˆ›å»ºç”¨æˆ·">ä½¿ç”¨CSR APIåˆ›å»ºç”¨æˆ·</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CloudNative/k8s/å®æˆ˜æ¡ˆä¾‹/å…¶ä»–å®æˆ˜æ¡ˆä¾‹">å…¶ä»–å®æˆ˜æ¡ˆä¾‹</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CloudNative/k8s/Kubeadm å¿«é€Ÿéƒ¨ç½²k8sé›†ç¾¤">Kubeadm å¿«é€Ÿéƒ¨ç½²k8sé›†ç¾¤</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CloudNative/k8s/Kubernetes REST API">Kubernetes REST API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CloudNative/k8s/Kubernetes Yaml quicklystart">Kubernetes YAML file quicklystart</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CloudNative/k8s/Kubernetes with Jenkins CICD">åŸºäºkuberneteså¹³å°çš„CICDæŒç»­é›†æˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CloudNative/k8s/Minikube Basic">Minikube Basic</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CloudNative/k8s/Prometheus-Grafanaå…¨æ–¹ä½ç›‘æ§Kubernetesé›†ç¾¤">Prometheus+Grafanaå…¨æ–¹ä½ç›‘æ§Kubernetesé›†ç¾¤</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CloudNative/k8s/Remote access k8s">kubectlè¿œç¨‹è¿æ¥k8s</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CloudNative/k8s/k3d">k3d</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CloudNative/k8s/k8s command">Kubernetes CLI command -- kubectl</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CloudNative/k8s/k8s å›¾è§£å¤§å…¨">k8så›¾è§£å¤§å…¨</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CloudNative/k8s/k8s ç½‘ç»œç›¸å…³">k8s ç½‘ç»œç›¸å…³</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CloudNative/k8s/k8sæ¦‚å¿µåŠåŸç†ç›¸å…³">k8s æ¦‚å¿µåŠåŸç†ç›¸å…³</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CloudNative/k8s/kompose Basic">Kompose Basic</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CloudNative/k8s/kubenetesè¿œç¨‹è°ƒè¯•å·¥å…·">kubenetesè¿œç¨‹è°ƒè¯•å·¥å…·</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/CloudNative/k8s/å°æŠ€å·§/ä½¿ç”¨curlè®¿é—®k8sçš„REST API">å°æŠ€å·§</a></div></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CloudNative/Consul å…¥é—¨">Consul å…¥é—¨</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CloudNative/Dubbo Basic">Dubbo Basic</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CloudNative/Grafana Loki Basic">Grafana Loki</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CloudNative/Istio Basic">Istio Basic</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CloudNative/">CloudNative.</a></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/äº‘åŸç”Ÿç›¸å…³"><span itemprop="name">äº‘åŸç”Ÿç›¸å…³</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/k8s"><span itemprop="name">k8s</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/å®æˆ˜æ¡ˆä¾‹"><span itemprop="name">å®æˆ˜æ¡ˆä¾‹</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">ï¼ˆä¸€ï¼‰é€šè¿‡ç”¨æˆ·è´¦å·çš„æ–¹å¼åˆ†é…å•ç‹¬Namespaceçš„æƒé™</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>ï¼ˆä¸€ï¼‰é€šè¿‡ç”¨æˆ·è´¦å·çš„æ–¹å¼åˆ†é…å•ç‹¬Namespaceçš„æƒé™</h1><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1æ¡ˆä¾‹æè¿°">1.æ¡ˆä¾‹æè¿°<a href="#1æ¡ˆä¾‹æè¿°" class="hash-link" aria-label="Direct link to 1.æ¡ˆä¾‹æè¿°" title="Direct link to 1.æ¡ˆä¾‹æè¿°">â€‹</a></h2><p>åˆ›å»ºä¸€ä¸ªç”¨æˆ·ï¼Œä»…æ‹¥æœ‰å¯¹know-systemå‘½åç©ºé—´ä¸‹çš„podsã€deploymentsèµ„æºæ“ä½œæƒé™ï¼Œé‡‡ç”¨RoleBindingç»‘å®šClusterRoleçš„æ–¹å¼æ¥å®ç°ã€‚</p><p>å¤§è‡´å®ç°æ€è·¯ï¼š</p><p> 1.ç”Ÿæˆç”¨æˆ·çš„è¯ä¹¦æ–‡ä»¶key</p><p> 2.é€šè¿‡apiserverç”Ÿæˆè¯ä¹¦è¯·æ±‚</p><p> 3.é€šè¿‡k8sçš„apiçš„caè¯ä¹¦ç­¾å‘ç”¨æˆ·çš„è¯ä¹¦è¯·æ±‚</p><p> 4.é…ç½®k8sè®¾ç½®é›†ç¾¤ã€åˆ›å»ºç”¨æˆ·ã€é…ç½®ä¸Šä¸‹æ–‡ä¿¡æ¯</p><p> 5.åˆ›å»ºClusterRoleã€RoleBindingèµ„æº</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="2åˆ›å»ºç”¨æˆ·è´¦å·">2.åˆ›å»ºç”¨æˆ·è´¦å·<a href="#2åˆ›å»ºç”¨æˆ·è´¦å·" class="hash-link" aria-label="Direct link to 2.åˆ›å»ºç”¨æˆ·è´¦å·" title="Direct link to 2.åˆ›å»ºç”¨æˆ·è´¦å·">â€‹</a></h2><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1.åˆ›å»ºè¯ä¹¦æ–‡ä»¶</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@k8s-master ~]\# cd /etc/kubernetes/pki/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@k8s-master /etc/kubernetes/pki]\# (umask 077;openssl genrsa -out knowman.key 2048)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Generating RSA private key, 2048 bit long modulus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">....................................................................................+++</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">................+++</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">e is 65537 (0x10001)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2.ä½¿ç”¨apiserverçš„è¯ä¹¦ç­¾å‘è¯ä¹¦è¯·æ±‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2-1.ç”³è¯·ç­¾åï¼Œè¯ä¹¦è¯·æ±‚ï¼Œç”³è¯·çš„ç”¨æˆ·åæ˜¯knowmanï¼Œç»„æ˜¯knowgroup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@k8s-master /etc/kubernetes/pki]\# openssl req -new -key knowman.key -out knowman.csr -subj &quot;/CN=knowman/O=knowgroup&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@k8s-master /etc/kubernetes/pki]\# ll knowman.*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-rw-r--r-- 1 root root  915 4æœˆ  20 13:27 knowman.csr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-rw------- 1 root root 1679 4æœˆ  20 13:25 knowman.key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2-2.ç­¾å‘è¯ä¹¦(ä½¿ç”¨apiserverçš„caè¯ä¹¦ç­¾å‘ç”¨æˆ·è¯ä¹¦)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@k8s-master /etc/kubernetes/pki]\# openssl x509 -req -in knowman.csr -CA ca.crt  -CAkey ca.key  -CAcreateserial -out knowman.crt -days 3650</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Signature ok</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">subject=/CN=knowman/O=knowgroup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Getting CA Private Key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0.3 ğŸ‘€ å…ˆæŸ¥çœ‹ä¸€ä¸‹é›†ç¾¤apiserverçš„ç›‘å¬åœ°å€ï¼Œç¡®ä¿ç›‘å¬çš„è¯¥åœ°å€å¯ä»¥è®¿é—®åˆ°kubernetesï¼ˆè¿™é‡Œæˆ‘åšäº†ä»£ç†ã€‚ã€‚ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â¯ kubectl cluster-info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Kubernetes control plane is running at https://127.0.0.1:52520</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CoreDNS is running at https://127.0.0.1:52520/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">To further debug and diagnose cluster problems, use &#x27;kubectl cluster-info dump&#x27;.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3.é…ç½®é›†ç¾¤ã€ç”¨æˆ·ã€ä¸Šä¸‹æ–‡ä¿¡æ¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#é…ç½®é›†ç¾¤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@k8s-master /etc/kubernetes/pki]\# kubectl config set-cluster kubernetes --embed-certs=true --certificate-authority=/etc/kubernetes/pki/ca.crt --server=https://192.168.81.210:6443</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Cluster &quot;kubernetes&quot; set.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#é…ç½®ç”¨æˆ·ä¿¡æ¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@k8s-master /etc/kubernetes/pki]\# kubectl config set-credentials knowman --embed-certs=true --client-certificate=/etc/kubernetes/pki/knowman.crt --client-key=/etc/kubernetes/pki/knowman.key </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">User &quot;knowman&quot; set.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#é…ç½®ä¸Šä¸‹æ–‡ä¿¡æ¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@k8s-master /etc/kubernetes/pki]\# kubectl config set-context knowman@kubernetes --cluster=kubernetes --user=knowman</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Context &quot;knowman@kubernetes&quot; created.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4.æŸ¥çœ‹é…ç½®çš„é›†ç¾¤ä¿¡æ¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@k8s-master /etc/kubernetes/pki]\# kubectl config view</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" src="https://cdn.agou-ops.cn/others/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_30,g_se,x_10,y_10,shadow_20,type_ZmFuZ3poZW5naGVpdGk=-20220616085930486.png" alt="Kubernetesé›†ç¾¤RBACæˆæƒæ¡ˆä¾‹ï¼ˆä¸€ï¼‰é€šè¿‡ç”¨æˆ·è´¦å·çš„æ–¹å¼åˆ†é…å•ç‹¬Namespaceçš„æƒé™ï¼ˆå››åï¼‰_ç”¨æˆ·è´¦å·" class="img_ev3q"></p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">5ï¼‰åˆ‡æ¢åˆ°knowmanç”¨æˆ·</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@k8s-master /etc/kubernetes/pki]\# kubectl config use-context knowman@kubernetes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Switched to context &quot;knowman@kubernetes&quot;.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">6ï¼‰è¯•ç€æŸ¥çœ‹ä¸‹know-systemå‘½åç©ºé—´ä¸‹çš„èµ„æº</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@k8s-master /etc/kubernetes/pki]\# kubectl get pod -n know-system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Error from server (Forbidden): pods is forbidden: User &quot;knowman&quot; cannot list resource &quot;pods&quot; in API group &quot;&quot; in the namespace &quot;know-system&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#å¯ä»¥çœ‹åˆ°æ²¡æœ‰æƒé™è®¿é—®</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">7ï¼‰åˆ‡æ¢åˆ°adminç”¨æˆ·è¿›è¡Œæˆæƒ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@k8s-master ~]\# kubectl config use-context kubernetes-admin@kubernetes </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Switched to context &quot;kubernetes-admin@kubernetes&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="3åˆ›å»ºclusterroleèµ„æºè®¾ç½®æƒé™">3.åˆ›å»ºClusterRoleèµ„æºè®¾ç½®æƒé™<a href="#3åˆ›å»ºclusterroleèµ„æºè®¾ç½®æƒé™" class="hash-link" aria-label="Direct link to 3.åˆ›å»ºClusterRoleèµ„æºè®¾ç½®æƒé™" title="Direct link to 3.åˆ›å»ºClusterRoleèµ„æºè®¾ç½®æƒé™">â€‹</a></h2><p>åˆ›å»ºä¸€ä¸ªClusterRoleï¼Œé’ˆå¯¹èµ„æºåšä¸€äº›æˆæƒï¼Œç”±äºClusterRoleæ˜¯é›†ç¾¤çº§åˆ«çš„è§’è‰²æˆæƒï¼Œå¯ä»¥å¤šæ¬¡å¤ç”¨</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1.ç¼–å†™ClusterRoleèµ„æº</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@k8s-master ~/k8s_1.19_yaml/rbac]\# vim knowman-clusterrole.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: rbac.authorization.k8s.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: ClusterRole</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: knowman-clusterrole</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rules:                                          #å®šä¹‰è§’è‰²</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- apiGroups: [&quot;&quot;,&quot;apps&quot;]                        #å¯¹å“ªä¸ªapiç»„è¿›è¡Œæˆæƒï¼Œ&quot;&quot;æ ¸å¿ƒèµ„æºç»„ï¼Œappsç»„æ˜¯deploymentæ§åˆ¶å™¨æ‰€åœ¨çš„apiç»„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  resources: [&quot;pods&quot;,&quot;deployments&quot;]               #å¯¹ä»€ä¹ˆèµ„æºè¿›è¡Œæˆæƒ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  verbs:                                        #å…·ä½“çš„æƒé™åˆ—è¡¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - get</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - watch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2.åˆ›å»ºèµ„æº</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@k8s-master ~/k8s_1.19_yaml/rbac]\# kubectl create -f knowman-clusterrole.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clusterrole.rbac.authorization.k8s.io/knowman-clusterrole created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3.æŸ¥çœ‹èµ„æº</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@k8s-master ~/k8s_1.19_yaml/rbac]\# kubectl get clusterrole knowman-clusterrole</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                  CREATED AT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">knowman-clusterrole   2021-04-20T06:26:20Z</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4.æŸ¥çœ‹èµ„æºçš„è¯¦ç»†ä¿¡æ¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@k8s-master ~/k8s_1.19_yaml/rbac]\# kubectl describe clusterrole knowman-clusterrole</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" src="https://cdn.agou-ops.cn/others/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_30,g_se,x_10,y_10,shadow_20,type_ZmFuZ3poZW5naGVpdGk=-20220616085930519.png" alt="Kubernetesé›†ç¾¤RBACæˆæƒæ¡ˆä¾‹ï¼ˆä¸€ï¼‰é€šè¿‡ç”¨æˆ·è´¦å·çš„æ–¹å¼åˆ†é…å•ç‹¬Namespaceçš„æƒé™ï¼ˆå››åï¼‰_docker_02" class="img_ev3q"></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="4åˆ›å»ºrolebindingèµ„æºå°†ç”¨æˆ·å’Œè§’è‰²ç»‘å®š">4.åˆ›å»ºRoleBindingèµ„æºå°†ç”¨æˆ·å’Œè§’è‰²ç»‘å®š<a href="#4åˆ›å»ºrolebindingèµ„æºå°†ç”¨æˆ·å’Œè§’è‰²ç»‘å®š" class="hash-link" aria-label="Direct link to 4.åˆ›å»ºRoleBindingèµ„æºå°†ç”¨æˆ·å’Œè§’è‰²ç»‘å®š" title="Direct link to 4.åˆ›å»ºRoleBindingèµ„æºå°†ç”¨æˆ·å’Œè§’è‰²ç»‘å®š">â€‹</a></h2><p>é€šè¿‡RoleBindingè§’è‰²ç»‘å®šå°†ç”¨æˆ·ä¸é›†ç¾¤è§’è‰²è¿›è¡Œç»‘å®š</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1.ç¼–å†™yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@k8s-master ~/k8s_1.19_yaml/rbac]\# vim knowman-rolebinding.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: rbac.authorization.k8s.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: RoleBinding</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: knowman-rolebinding</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  namespace: know-system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">subjects:                                               #å…³è”ç”¨æˆ·ä¿¡æ¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- kind: User                                            #ç±»å‹ä¸ºç”¨æˆ·</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: knowman                                         #ç”¨æˆ·åç§°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  namespace: know-system                                #è§’è‰²æ‰€èƒ½æ§åˆ¶çš„å‘½åç©ºé—´</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  apiGroup: rbac.authorization.k8s.io</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">roleRef:                                            #å…³è”è§’è‰²ä¿¡æ¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  kind: ClusterRole                                  #ç±»å‹ä¸ºClusterRole</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: knowman-clusterrole                           #è§’è‰²åç§°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  apiGroup: rbac.authorization.k8s.io</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2.åˆ›å»ºèµ„æº</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@k8s-master ~/k8s_1.19_yaml/rbac]\# kubectl create -f knowman-rolebinding.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rolebinding.rbac.authorization.k8s.io/knowman-rolebinding created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3.æŸ¥çœ‹èµ„æº</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@k8s-master ~/k8s_1.19_yaml/rbac]\# kubectl get rolebinding knowman-rolebinding -n know-system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                  ROLE                              AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">knowman-rolebinding   ClusterRole/knowman-clusterrole   17s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4.æŸ¥çœ‹èµ„æºçš„è¯¦ç»†ä¿¡æ¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@k8s-master ~/k8s_1.19_yaml/rbac]\# kubectl describe rolebinding knowman-rolebinding -n know-system</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" src="https://cdn.agou-ops.cn/others/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_30,g_se,x_10,y_10,shadow_20,type_ZmFuZ3poZW5naGVpdGk=-20220616085930655.png" alt="Kubernetesé›†ç¾¤RBACæˆæƒæ¡ˆä¾‹ï¼ˆä¸€ï¼‰é€šè¿‡ç”¨æˆ·è´¦å·çš„æ–¹å¼åˆ†é…å•ç‹¬Namespaceçš„æƒé™ï¼ˆå››åï¼‰_nginx_03" class="img_ev3q"></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="5åˆ‡æ¢knowmanç”¨æˆ·æŸ¥çœ‹æƒé™">5.åˆ‡æ¢knowmanç”¨æˆ·æŸ¥çœ‹æƒé™<a href="#5åˆ‡æ¢knowmanç”¨æˆ·æŸ¥çœ‹æƒé™" class="hash-link" aria-label="Direct link to 5.åˆ‡æ¢knowmanç”¨æˆ·æŸ¥çœ‹æƒé™" title="Direct link to 5.åˆ‡æ¢knowmanç”¨æˆ·æŸ¥çœ‹æƒé™">â€‹</a></h2><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1.åˆ‡æ¢ç”¨æˆ·</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@k8s-master ~/k8s_1.19_yaml/rbac]\# kubectl config use-context knowman@kubernetes </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Switched to context &quot;knowman@kubernetes&quot;.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2.æŸ¥çœ‹å¯ä»¥æ“ä½œçš„pod/deploymentèµ„æº</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@k8s-master ~/k8s_1.19_yaml/rbac]\# kubectl get pod,deployment -n know-system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                                READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/deploy-nginx-5cfd6fd7bd-79z4t   1/1     Running   1          6d3h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/deploy-nginx-5cfd6fd7bd-b67wf   1/1     Running   1          6d3h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/deploy-nginx-5cfd6fd7bd-qpl2w   1/1     Running   1          6d3h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                           READY   UP-TO-DATE   AVAILABLE   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/deploy-nginx   3/3     3            3           6d5h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3.åˆ é™¤podæŸ¥çœ‹æ˜¯å¦æœ‰æƒé™</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@k8s-master ~/k8s_1.19_yaml/rbac]\# kubectl delete pod deploy-nginx-5cfd6fd7bd-79z4t -n know-system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Error from server (Forbidden): pods &quot;deploy-nginx-5cfd6fd7bd-79z4t&quot; is forbidden: User &quot;knowman&quot; cannot delete resource &quot;pods&quot; in API group &quot;&quot; in the namespace &quot;know-system&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#æ— æƒåˆ é™¤</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>é™¤äº†deploymentã€podèµ„æºä¹‹å‰æ— æƒæ“ä½œå…¶ä»–èµ„æº</p><p><img loading="lazy" src="https://cdn.agou-ops.cn/others/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_30,g_se,x_10,y_10,shadow_20,type_ZmFuZ3poZW5naGVpdGk=-20220616085930822.png" alt="Kubernetesé›†ç¾¤RBACæˆæƒæ¡ˆä¾‹ï¼ˆä¸€ï¼‰é€šè¿‡ç”¨æˆ·è´¦å·çš„æ–¹å¼åˆ†é…å•ç‹¬Namespaceçš„æƒé™ï¼ˆå››åï¼‰_nginx_04" class="img_ev3q"></p><h1>ï¼ˆäºŒï¼‰é€šè¿‡kubeconfigæˆæƒæ–‡ä»¶å®ç°ç‰¹å®šèµ„æºçš„æƒé™åˆ†é…</h1><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1æ¡ˆä¾‹æè¿°-1">1.æ¡ˆä¾‹æè¿°<a href="#1æ¡ˆä¾‹æè¿°-1" class="hash-link" aria-label="Direct link to 1.æ¡ˆä¾‹æè¿°" title="Direct link to 1.æ¡ˆä¾‹æè¿°">â€‹</a></h2><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ ¹è¯ä¹¦ç­¾å‘ä¸€ä¸ªå®¢æˆ·ç«¯è¯ä¹¦ï¼Œåœ¨å®¢æˆ·ç«¯è¯ä¹¦é‡Œé¢æŒ‡å®šç”¨æˆ·åï¼Œç„¶ååœ¨é€šè¿‡kubectl configå‘½ä»¤ç”Ÿæˆä¸€ä¸ªkubeconfigæˆæƒæ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹ä¸­åŒ…æ‹¬äº†é›†ç¾¤ä¿¡æ¯ã€ç”¨æˆ·ä¿¡æ¯ã€å®¢æˆ·ç«¯è¯ä¹¦ä¿¡æ¯ï¼Œç„¶åå†åˆ›å»ºä¸€ä¸ªrbacç­–ç•¥ï¼Œå°†è¯ä¹¦ä¸­çš„ç”¨æˆ·ä¸åˆ›å»ºçš„roleè§’è‰²è¿›è¡Œç»‘å®šï¼Œå³å¯å®ç°é€šè¿‡æˆæƒæ–‡ä»¶çš„æ–¹å¼å»è®¿é—®é›†ç¾¤çš„ç‰¹å®šèµ„æº</p><p><strong>æœ€ç»ˆå®ç°ç›®çš„ï¼š</strong> å°†æˆæƒæ–‡ä»¶å‘ç»™å¯¹åº”çš„äººå‘˜ï¼Œè®©äººå‘˜åªéœ€kubectlå‘½ä»¤çš„æ—¶å€™æŒ‡å®škubeconfigæ–‡ä»¶çš„è·¯å¾„å³å¯è¯·æ±‚é›†ç¾¤èµ„æº</p><p><strong>å®ç°æ­¥éª¤ï¼š</strong></p><p>1.å®‰è£…cfsslå·¥å…·ï¼Œç”¨k8s caæ ¹è¯ä¹¦ç­¾å‘ä¸€ä¸ªå®¢æˆ·ç«¯è¯ä¹¦</p><p>2.ç”¨kubectl configç”Ÿæˆæˆæƒæ–‡ä»¶</p><p>3.åˆ›å»ºrbacæˆæƒç­–ç•¥</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="2å‡†å¤‡cfsslå·¥å…·å‘½ä»¤">2.å‡†å¤‡cfsslå·¥å…·å‘½ä»¤<a href="#2å‡†å¤‡cfsslå·¥å…·å‘½ä»¤" class="hash-link" aria-label="Direct link to 2.å‡†å¤‡cfsslå·¥å…·å‘½ä»¤" title="Direct link to 2.å‡†å¤‡cfsslå·¥å…·å‘½ä»¤">â€‹</a></h2><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1.ç¼–å†™è„šæœ¬</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@k8s-master 1 rbac]\# cat cfssl.sh </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wget https://pkg.cfssl.org/R1.2/cfssl_linux-amd64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wget https://pkg.cfssl.org/R1.2/cfssljson_linux-amd64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wget https://pkg.cfssl.org/R1.2/cfssl-certinfo_linux-amd64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">chmod +x cfssl*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mv cfssl_linux-amd64 /usr/bin/cfssl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mv cfssljson_linux-amd64 /usr/bin/cfssljson</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mv cfssl-certinfo_linux-amd64 /usr/bin/cfssl-certinfo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2.æ‰§è¡Œè„šæœ¬</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@k8s-master1 rbac]\# sh cfssl.sh </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3.æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@k8s-master1 rbac]\# ll /usr/bin/cfssl* /usr/local/bin/cfssl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-rwxr-xr-x 1 root root  6595195 4æœˆ  17 03:17 /usr/bin/cfssl-certinfo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-rwxr-xr-x 1 root root  2277873 4æœˆ  17 03:17 /usr/bin/cfssljson</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-rwxr-xr-x 1 root root 10376657 5æœˆ  11 10:17 /usr/local/bin/cfssl</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="3åˆ©ç”¨k8sæ ¹è¯ä¹¦ç­¾å‘ä¸€ä¸ªå®¢æˆ·ç«¯è¯ä¹¦">3.åˆ©ç”¨k8sæ ¹è¯ä¹¦ç­¾å‘ä¸€ä¸ªå®¢æˆ·ç«¯è¯ä¹¦<a href="#3åˆ©ç”¨k8sæ ¹è¯ä¹¦ç­¾å‘ä¸€ä¸ªå®¢æˆ·ç«¯è¯ä¹¦" class="hash-link" aria-label="Direct link to 3.åˆ©ç”¨k8sæ ¹è¯ä¹¦ç­¾å‘ä¸€ä¸ªå®¢æˆ·ç«¯è¯ä¹¦" title="Direct link to 3.åˆ©ç”¨k8sæ ¹è¯ä¹¦ç­¾å‘ä¸€ä¸ªå®¢æˆ·ç«¯è¯ä¹¦">â€‹</a></h2><p>åˆ©ç”¨k8sçš„caæ ¹è¯ä¹¦ç­¾å‘ä¸€ä¸ªä¸“é—¨ç»™æŸä¸ªå®¢æˆ·ç«¯ä½¿ç”¨çš„è¯ä¹¦</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1.ç¼–å†™è„šæœ¬</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@k8s-master1 rbac]\# vim cert.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat &gt; ca-config.json &lt;&lt;EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;signing&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;default&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;expiry&quot;: &quot;87600h&quot;            #è¯ä¹¦çš„æœ‰æ•ˆæœŸ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;profiles&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;kubernetes&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;usages&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;signing&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;key encipherment&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;server auth&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;client auth&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;expiry&quot;: &quot;87600h&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat &gt; jiangxl-csr.json &lt;&lt;EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;CN&quot;: &quot;jiangxl&quot;,                  #å¯ä»¥ç†è§£ä¸ºæ˜¯ç”¨æˆ·åï¼Œrbacæˆæƒçš„æ—¶å€™ä¹Ÿæ˜¯æ ¹æ®è¿™ä¸ªå€¼æ¥æˆæƒ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;hosts&quot;: [],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;key&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;algo&quot;: &quot;rsa&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;size&quot;: 2048</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;names&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;C&quot;: &quot;CN&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;ST&quot;: &quot;BeiJing&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;L&quot;: &quot;BeiJing&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;O&quot;: &quot;k8s&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;OU&quot;: &quot;System&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cfssl gencert -ca=/etc/kubernetes/pki/ca.crt -ca-key=/etc/kubernetes/pki/ca.key -config=ca-config.json -profile=kubernetes jiangxl-csr.json | cfssljson -bare jiangxl           #é€šè¿‡cfsslç”Ÿæˆè¯ä¹¦ï¼Œè¦æŒ‡å®šk8sæ ¹è¯ä¹¦çš„è·¯å¾„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2.ç”Ÿæˆè¯ä¹¦</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@k8s-master1 rbac]\# sh cert.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2021/07/06 14:52:58 [INFO] generate received request</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2021/07/06 14:52:58 [INFO] received CSR</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2021/07/06 14:52:58 [INFO] generating key: rsa-2048</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2021/07/06 14:52:58 [INFO] encoded CSR</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2021/07/06 14:52:58 [INFO] signed certificate with serial number 104120417046794075592128325952316827755218120119</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2021/07/06 14:52:58 [WARNING] This certificate lacks a &quot;hosts&quot; field. This makes it unsuitable for</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">websites. For more information see the Baseline Requirements for the Issuance and Management</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">of Publicly-Trusted Certificates, v.1.1.6, from the CA/Browser Forum (https://cabforum.org);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">specifically, section 10.2.3 (&quot;Information Requirements&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3.æŸ¥çœ‹ç”Ÿæˆçš„è¯ä¹¦æ–‡ä»¶</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@k8s-master1 rbac]\# ll ca-config.json jiangxl*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-rw-r--r-- 1 root root  292 7æœˆ   6 14:52 ca-config.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-rw-r--r-- 1 root root  997 7æœˆ   6 14:52 jiangxl.csr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-rw-r--r-- 1 root root  220 7æœˆ   6 14:52 jiangxl-csr.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-rw------- 1 root root 1679 7æœˆ   6 14:52 jiangxl-key.pem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-rw-r--r-- 1 root root 1281 7æœˆ   6 14:52 jiangxl.pem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#ä¸»è¦æœ‰ç”¨çš„å°±æ˜¯jiangxl.pem jiangxl-key.pem</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="4ç”Ÿæˆkubeconfigæˆæƒæ–‡ä»¶">4.ç”Ÿæˆkubeconfigæˆæƒæ–‡ä»¶<a href="#4ç”Ÿæˆkubeconfigæˆæƒæ–‡ä»¶" class="hash-link" aria-label="Direct link to 4.ç”Ÿæˆkubeconfigæˆæƒæ–‡ä»¶" title="Direct link to 4.ç”Ÿæˆkubeconfigæˆæƒæ–‡ä»¶">â€‹</a></h2><p>ç”Ÿæˆä¸€ä¸ªkubeconfigæˆæƒæ–‡ä»¶ï¼Œæ–‡ä»¶çš„å†…å®¹å’Œ/root/.kube/configæ–‡ä»¶åŸºæœ¬æ˜¯ä¸€è‡´çš„ï¼Œåªæ˜¯è¯ä¹¦å†…å®¹ä¸ä¸€æ ·ï¼Œè¯ä¹¦å†…å®¹ä¸åŒæ‰€å±çš„æƒé™ä¹Ÿä¸åŒï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡æŒ‡å®škubeconfigæ–‡ä»¶å»æ‰§è¡Œk8så‘½ä»¤</p><p>ç”Ÿæˆæˆæƒæ–‡ä»¶éœ€è¦åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼šè®¾ç½®é›†ç¾¤ã€è®¾ç½®è¯ä¹¦ç§é’¥æ–‡ä»¶è·¯å¾„ã€æŒ‡å®šç”¨æˆ·åï¼Œæ¯å½“æ‰§è¡Œä¸€ä¸ªæ­¥éª¤ï¼Œkubeconfigçš„å†…å®¹å°±ä¼šå¢åŠ ä¸Šç›¸åº”çš„é…ç½®</p><p><strong>1.ç”Ÿæˆæˆæƒæ–‡ä»¶è®¾ç½®é›†ç¾¤ä¿¡æ¯ï¼šæŒ‡å®šæ ¹è¯ä¹¦è·¯å¾„ã€k8sapiåœ°å€ã€æˆæƒæ–‡ä»¶åç§°</strong></p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl config set-cluster kubernetes \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --certificate-authority=/etc/kubernetes/pki/ca.crt \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --embed-certs=true \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --server=https://192.168.16.106:6443 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --kubeconfig=jiangxl.kubeconfig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#set-cluster kubernetesï¼šè®¾ç½®é›†ç¾¤åç§°ä¸ºkubernetes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#--certificate-authorityï¼šæŒ‡å®šæ ¹è¯ä¹¦è·¯å¾„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#--serverï¼šæŒ‡å®šk8sapiåœ°å€</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#--kubeconfigï¼šæŒ‡å®šæˆæƒæ–‡ä»¶åç§°  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å½“æ‰§è¡Œäº†ç¬¬ä¸€æ­¥è®¾ç½®é›†ç¾¤ä¿¡æ¯åï¼ŒæŸ¥çœ‹kubeconfigçš„æ–‡ä»¶å†…å®¹ï¼Œä¼šå‘ç°æ–‡ä»¶é‡Œé¢å¤šäº†æ ¹è¯ä¹¦caçš„æ–‡ä»¶å†…å®¹ä»¥åŠé›†ç¾¤apiserverçš„åœ°å€
<img loading="lazy" src="https://cdn.agou-ops.cn/others/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_30,g_se,x_10,y_10,shadow_20,type_ZmFuZ3poZW5naGVpdGk=-20220616090418303.png" alt="Kubernetesé›†ç¾¤RBACæˆæƒæ¡ˆä¾‹ï¼ˆäºŒï¼‰é€šè¿‡kubeconfigæˆæƒæ–‡ä»¶å®ç°ç‰¹å®šèµ„æºçš„æƒé™åˆ†é…ï¼ˆå››åä¸€ï¼‰_linux" class="img_ev3q"></p><p><strong>2.è®¾ç½®å®¢æˆ·ç«¯è®¤è¯ï¼šæŒ‡å®šå®¢æˆ·ç«¯è¯ä¹¦æ–‡ä»¶è·¯å¾„å’Œç§é’¥æ–‡ä»¶è·¯å¾„</strong></p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl config set-credentials jiangxl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --client-key=jiangxl-key.pem \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --client-certificate=jiangxl.pem \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --embed-certs=true \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --kubeconfig=jiangxl.kubeconfig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#--client-keyï¼šæŒ‡å®šå®¢æˆ·ç«¯è¯ä¹¦çš„ç§é’¥æ–‡ä»¶</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#--client-certificateï¼šæŒ‡å®šå®¢æˆ·ç«¯è¯ä¹¦çš„è¯ä¹¦æ–‡ä»¶</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#--kubeconfigï¼šæŒ‡å®šæˆæƒæ–‡ä»¶åç§°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#set-credentials jiangxlï¼šè®¾ç½®è¯ä¹¦çš„åç§°ä¸ºjiangxl</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å½“ç¬¬äºŒæ­¥è®¾ç½®å®¢æˆ·ç«¯è¯ä¹¦è®¤è¯å®Œæˆåï¼Œkubeconfigæ–‡ä»¶å°±ä¼šå¢åŠ å®¢æˆ·ç«¯è¯ä¹¦æ–‡ä»¶çš„å†…å®¹
<img loading="lazy" src="https://cdn.agou-ops.cn/others/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_30,g_se,x_10,y_10,shadow_20,type_ZmFuZ3poZW5naGVpdGk=-20220616090418664.png" alt="Kubernetesé›†ç¾¤RBACæˆæƒæ¡ˆä¾‹ï¼ˆäºŒï¼‰é€šè¿‡kubeconfigæˆæƒæ–‡ä»¶å®ç°ç‰¹å®šèµ„æºçš„æƒé™åˆ†é…ï¼ˆå››åä¸€ï¼‰_å®¢æˆ·ç«¯_02" class="img_ev3q"></p><p><strong>3.è®¾ç½®é»˜è®¤ä¸Šä¸‹æ–‡ï¼šæŒ‡å®šç”¨æˆ·åæ˜¯ä»€ä¹ˆ</strong></p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl config set-context kubernetes \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --cluster=kubernetes \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --user=jiangxl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --kubeconfig=jiangxl.kubeconfig</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç¬¬ä¸‰æ­¥æ‰§è¡Œå®Œæˆåï¼Œkubeconfigæ–‡ä»¶é‡Œé¢ä¼šå¢åŠ ç”¨æˆ·ä¿¡æ¯é…ç½®ï¼Œrbacæˆæƒä¹Ÿæ˜¯å°†è¿™ä¸ªç”¨æˆ·å’ŒæŸä¸ªroleè¿›è¡Œç»‘å®š
<img loading="lazy" src="https://cdn.agou-ops.cn/others/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_30,g_se,x_10,y_10,shadow_20,type_ZmFuZ3poZW5naGVpdGk=-20220616090418987.png" alt="Kubernetesé›†ç¾¤RBACæˆæƒæ¡ˆä¾‹ï¼ˆäºŒï¼‰é€šè¿‡kubeconfigæˆæƒæ–‡ä»¶å®ç°ç‰¹å®šèµ„æºçš„æƒé™åˆ†é…ï¼ˆå››åä¸€ï¼‰_å®¹å™¨_03" class="img_ev3q"></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="5æ‰§è¡Œkubectlå‘½ä»¤æ—¶æŒ‡å®šæˆæƒæ–‡ä»¶">5.æ‰§è¡Œkubectlå‘½ä»¤æ—¶æŒ‡å®šæˆæƒæ–‡ä»¶<a href="#5æ‰§è¡Œkubectlå‘½ä»¤æ—¶æŒ‡å®šæˆæƒæ–‡ä»¶" class="hash-link" aria-label="Direct link to 5.æ‰§è¡Œkubectlå‘½ä»¤æ—¶æŒ‡å®šæˆæƒæ–‡ä»¶" title="Direct link to 5.æ‰§è¡Œkubectlå‘½ä»¤æ—¶æŒ‡å®šæˆæƒæ–‡ä»¶">â€‹</a></h2><p>ä½¿ç”¨<code>--kubeconfig</code>å‚æ•°å»æŒ‡å®šä½¿ç”¨å“ªä¸ªæˆæƒæ–‡ä»¶ï¼Œåˆ°æ­¤æ—¶ä¹Ÿå°±å¯ä»¥æŠŠæˆæƒæ–‡ä»¶å‘é€ç»™éœ€è¦ä½¿ç”¨è¿™ä¸ªæˆæƒçš„äººï¼Œè™½ç„¶ç°åœ¨è¿˜æ˜¯æ— æƒé™è·å–èµ„æºçš„çŠ¶æ€ï¼Œä½†æ˜¯å·²ç»å¯ä»¥è¿æ¥åˆ°k8sé›†ç¾¤äº†ï¼Œåªéœ€è¦é…ç½®å¥½rbacç­–ç•¥ï¼Œå³å¯æœ‰æƒé™è®¿é—®èµ„æº</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@k8s-master1 rbac]\# kubectl --kubeconfig=jiangxl.kubeconfig get pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Error from server (Forbidden): pods is forbidden: User &quot;jiangxl&quot; cannot list resource &quot;pods&quot; in API group &quot;&quot; in the namespace &quot;default&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="6é…ç½®rbacç­–ç•¥æˆæƒkubeconfigç›¸åº”çš„æƒé™">6.é…ç½®rbacç­–ç•¥æˆæƒkubeconfigç›¸åº”çš„æƒé™<a href="#6é…ç½®rbacç­–ç•¥æˆæƒkubeconfigç›¸åº”çš„æƒé™" class="hash-link" aria-label="Direct link to 6.é…ç½®rbacç­–ç•¥æˆæƒkubeconfigç›¸åº”çš„æƒé™" title="Direct link to 6.é…ç½®rbacç­–ç•¥æˆæƒkubeconfigç›¸åº”çš„æƒé™">â€‹</a></h2><p><strong>1.ç¼–å†™rbac yamlèµ„æºæ–‡ä»¶</strong></p><p>åˆ›å»ºä¸€ä¸ªroleï¼Œæˆæƒå¯¹defaultå‘½åç©ºé—´ä¸‹podã€deploymentã€svcèµ„æºçš„è®¿é—®æƒé™ï¼Œå¹¶å°†è¯¥roleä¸jiangxlç”¨æˆ·è¿›è¡Œç»‘å®š</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@k8s</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">master1 rbac</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">\</span><span class="token comment" style="color:#999988;font-style:italic"># vim rbac.yaml </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> rbac.authorization.k8s.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Role</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> pod</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">reader</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">rules</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">apiGroups</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;apps&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;pods&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;deployments&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;services&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">verbs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;get&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;watch&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;list&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> rbac.authorization.k8s.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> RoleBinding</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> read</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pods</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">subjects</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> User</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> jiangxl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">apiGroup</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> rbac.authorization.k8s.io</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">roleRef</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Role</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> pod</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">reader</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">apiGroup</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> rbac.authorization.k8s.io</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>2.åˆ›å»ºrbacèµ„æº</strong></p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@k8s-master1 rbac]\# kubectl apply -f rbac.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">role.rbac.authorization.k8s.io/pod-reader created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rolebinding.rbac.authorization.k8s.io/read-pods created</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="7éªŒè¯kubeconfigæˆæƒæ–‡ä»¶æ˜¯å¦æœ‰äº†å¯¹åº”çš„æƒé™">7.éªŒè¯kubeconfigæˆæƒæ–‡ä»¶æ˜¯å¦æœ‰äº†å¯¹åº”çš„æƒé™<a href="#7éªŒè¯kubeconfigæˆæƒæ–‡ä»¶æ˜¯å¦æœ‰äº†å¯¹åº”çš„æƒé™" class="hash-link" aria-label="Direct link to 7.éªŒè¯kubeconfigæˆæƒæ–‡ä»¶æ˜¯å¦æœ‰äº†å¯¹åº”çš„æƒé™" title="Direct link to 7.éªŒè¯kubeconfigæˆæƒæ–‡ä»¶æ˜¯å¦æœ‰äº†å¯¹åº”çš„æƒé™">â€‹</a></h2><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@k8s-master1 rbac]\# kubectl --kubeconfig=jiangxl.kubeconfig get pod,deployment,svc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                         READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/jenkins-0                1/1     Running   0          38s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/tools-696bf5cc5c-z2znw   1/1     Running   0          103s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                    READY   UP-TO-DATE   AVAILABLE   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/tools   1/1     1            1           27d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                 TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">service/jenkins      ClusterIP   None         &lt;none&gt;        42/TCP    15d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">service/kubernetes   ClusterIP   10.96.0.1    &lt;none&gt;        443/TCP   59d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">service/tools        ClusterIP   None         &lt;none&gt;        42/TCP    27d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#å·²ç»å¯¹defaultå‘½åç©ºé—´ä¸‹çš„podã€deploymentã€svcèµ„æºæœ‰äº†è¯»å–æƒé™</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>ï¼ˆä¸‰ï¼‰é€šè¿‡Service Accountè´¦å·æˆæƒå®ç°ç‰¹å®šèµ„æºçš„æƒé™åˆ†é…</h1><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1åˆ›å»ºä¸€ä¸ªsaè´¦å·">1.åˆ›å»ºä¸€ä¸ªsaè´¦å·<a href="#1åˆ›å»ºä¸€ä¸ªsaè´¦å·" class="hash-link" aria-label="Direct link to 1.åˆ›å»ºä¸€ä¸ªsaè´¦å·" title="Direct link to 1.åˆ›å»ºä¸€ä¸ªsaè´¦å·">â€‹</a></h2><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@k8s</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">master1 sa</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">\</span><span class="token comment" style="color:#999988;font-style:italic"># vim nginx-sa.yaml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ServiceAccount</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">sa</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> rbac</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">kubernetes.io/cluster-service</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;true&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">addonmanager.kubernetes.io/mode</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Reconcile</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="2ç¼–å†™rbacèµ„æºæˆæƒyamlæ–‡ä»¶">2.ç¼–å†™rbacèµ„æºæˆæƒyamlæ–‡ä»¶<a href="#2ç¼–å†™rbacèµ„æºæˆæƒyamlæ–‡ä»¶" class="hash-link" aria-label="Direct link to 2.ç¼–å†™rbacèµ„æºæˆæƒyamlæ–‡ä»¶" title="Direct link to 2.ç¼–å†™rbacèµ„æºæˆæƒyamlæ–‡ä»¶">â€‹</a></h2><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@k8s</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">master1 sa</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">\</span><span class="token comment" style="color:#999988;font-style:italic"># vim nginx-rbac.yaml </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Role</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> rbac.authorization.k8s.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> rbac</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> pod</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">reader</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">rules</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">apiGroups</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;apps&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;pods&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;deployments&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;services&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">verbs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;get&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;watch&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;list&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> RoleBinding</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> rbac.authorization.k8s.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> read</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pods</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> rbac</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">subjects</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ServiceAccount        </span><span class="token comment" style="color:#999988;font-style:italic">#ç±»å‹å¡«å†™ServiceAccount</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">sa</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> rbac</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">roleRef</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Role</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> pod</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">reader</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">apiGroup</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> rbac.authorization.k8s.io</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="3ç¼–å†™nginx-podèµ„æºå¹¶ä½¿ç”¨saè´¦å·">3.ç¼–å†™nginx podèµ„æºå¹¶ä½¿ç”¨saè´¦å·<a href="#3ç¼–å†™nginx-podèµ„æºå¹¶ä½¿ç”¨saè´¦å·" class="hash-link" aria-label="Direct link to 3.ç¼–å†™nginx podèµ„æºå¹¶ä½¿ç”¨saè´¦å·" title="Direct link to 3.ç¼–å†™nginx podèµ„æºå¹¶ä½¿ç”¨saè´¦å·">â€‹</a></h2><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> StatefulSet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> web</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> stat`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">serviceName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;web&quot;</span><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">#æŒ‡å®šä½¿ç”¨å“ªä¸ªheadless serviceèµ„æº</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">matchLabels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">template</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">serviceAccountName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">sa</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">1.17</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> web</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="4åˆ›å»ºæ‰€æœ‰èµ„æºå¹¶æŸ¥çœ‹">4.åˆ›å»ºæ‰€æœ‰èµ„æºå¹¶æŸ¥çœ‹<a href="#4åˆ›å»ºæ‰€æœ‰èµ„æºå¹¶æŸ¥çœ‹" class="hash-link" aria-label="Direct link to 4.åˆ›å»ºæ‰€æœ‰èµ„æºå¹¶æŸ¥çœ‹" title="Direct link to 4.åˆ›å»ºæ‰€æœ‰èµ„æºå¹¶æŸ¥çœ‹">â€‹</a></h2><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1.åˆ›å»ºæ‰€æœ‰èµ„æº</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@k8s-master1 sa]\# kubectl apply -f ./</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">role.rbac.authorization.k8s.io/pod-reader created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rolebinding.rbac.authorization.k8s.io/read-pods created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">serviceaccount/nginx-sa created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">statefulset.apps/web created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2.æŸ¥çœ‹saè´¦å·</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#saè´¦å·ä¼šç”Ÿæˆä¸€ä¸ªtokenï¼Œè¿™ä¸ªtokenä¸­ä¿å­˜è¿™æ ¹è¯ä¹¦caä»¥åŠsaç”¨æˆ·çš„è¯ä¹¦kube   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:q</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ï¼Œç”¨äºè¿æ¥åˆ°k8sé›†ç¾¤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@k8s-master1 sa]\# kubectl get sa -n rbac</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME       SECRETS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">default    1         4m48s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nginx-sa   1         103s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@k8s-master1 sa]\# kubectl get secret -n rbac</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                   TYPE                                  DATA   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">default-token-4fkpj    kubernetes.io/service-account-token   3      5m14s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nginx-sa-token-vcrmv   kubernetes.io/service-account-token   3      2m9s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3.æŸ¥çœ‹nginxèµ„æºä¸­æ˜¯å¦å…³è”sa</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@k8s-master1 sa]\# kubectl describe statefulset -n rbac</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Name:               web</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Pod Template:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Labels:           app=nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Service Account:  nginx-sa</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>æ–‡ç« æ¥æºäºï¼š<a href="https://blog.51cto.com/jiangxl/5076630" target="_blank" rel="noopener noreferrer">https://blog.51cto.com/jiangxl/5076630</a></p><p>ä»…åšä¸ªäººå¤‡ä»½å­¦ä¹ ä½¿ç”¨.</p></blockquote></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/AGou-ops/myDocsv4/edit/main/docs/CloudNative/k8s/å®æˆ˜æ¡ˆä¾‹/RBAC å®æˆ˜æ¡ˆä¾‹.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/category/å®æˆ˜æ¡ˆä¾‹"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">å®æˆ˜æ¡ˆä¾‹</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/CloudNative/k8s/å®æˆ˜æ¡ˆä¾‹/SpringCloudå¾®æœåŠ¡ç”µå•†ç³»ç»Ÿåœ¨Kubernetesé›†ç¾¤ä¸­ä¸Šçº¿è¯¦ç»†æ•™ç¨‹"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">SpringCloudå¾®æœåŠ¡ç”µå•†ç³»ç»Ÿåœ¨Kubernetesé›†ç¾¤ä¸­ä¸Šçº¿è¯¦ç»†æ•™ç¨‹</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1æ¡ˆä¾‹æè¿°" class="table-of-contents__link toc-highlight">1.æ¡ˆä¾‹æè¿°</a></li><li><a href="#2åˆ›å»ºç”¨æˆ·è´¦å·" class="table-of-contents__link toc-highlight">2.åˆ›å»ºç”¨æˆ·è´¦å·</a></li><li><a href="#3åˆ›å»ºclusterroleèµ„æºè®¾ç½®æƒé™" class="table-of-contents__link toc-highlight">3.åˆ›å»ºClusterRoleèµ„æºè®¾ç½®æƒé™</a></li><li><a href="#4åˆ›å»ºrolebindingèµ„æºå°†ç”¨æˆ·å’Œè§’è‰²ç»‘å®š" class="table-of-contents__link toc-highlight">4.åˆ›å»ºRoleBindingèµ„æºå°†ç”¨æˆ·å’Œè§’è‰²ç»‘å®š</a></li><li><a href="#5åˆ‡æ¢knowmanç”¨æˆ·æŸ¥çœ‹æƒé™" class="table-of-contents__link toc-highlight">5.åˆ‡æ¢knowmanç”¨æˆ·æŸ¥çœ‹æƒé™</a></li><li><a href="#1æ¡ˆä¾‹æè¿°-1" class="table-of-contents__link toc-highlight">1.æ¡ˆä¾‹æè¿°</a></li><li><a href="#2å‡†å¤‡cfsslå·¥å…·å‘½ä»¤" class="table-of-contents__link toc-highlight">2.å‡†å¤‡cfsslå·¥å…·å‘½ä»¤</a></li><li><a href="#3åˆ©ç”¨k8sæ ¹è¯ä¹¦ç­¾å‘ä¸€ä¸ªå®¢æˆ·ç«¯è¯ä¹¦" class="table-of-contents__link toc-highlight">3.åˆ©ç”¨k8sæ ¹è¯ä¹¦ç­¾å‘ä¸€ä¸ªå®¢æˆ·ç«¯è¯ä¹¦</a></li><li><a href="#4ç”Ÿæˆkubeconfigæˆæƒæ–‡ä»¶" class="table-of-contents__link toc-highlight">4.ç”Ÿæˆkubeconfigæˆæƒæ–‡ä»¶</a></li><li><a href="#5æ‰§è¡Œkubectlå‘½ä»¤æ—¶æŒ‡å®šæˆæƒæ–‡ä»¶" class="table-of-contents__link toc-highlight">5.æ‰§è¡Œkubectlå‘½ä»¤æ—¶æŒ‡å®šæˆæƒæ–‡ä»¶</a></li><li><a href="#6é…ç½®rbacç­–ç•¥æˆæƒkubeconfigç›¸åº”çš„æƒé™" class="table-of-contents__link toc-highlight">6.é…ç½®rbacç­–ç•¥æˆæƒkubeconfigç›¸åº”çš„æƒé™</a></li><li><a href="#7éªŒè¯kubeconfigæˆæƒæ–‡ä»¶æ˜¯å¦æœ‰äº†å¯¹åº”çš„æƒé™" class="table-of-contents__link toc-highlight">7.éªŒè¯kubeconfigæˆæƒæ–‡ä»¶æ˜¯å¦æœ‰äº†å¯¹åº”çš„æƒé™</a></li><li><a href="#1åˆ›å»ºä¸€ä¸ªsaè´¦å·" class="table-of-contents__link toc-highlight">1.åˆ›å»ºä¸€ä¸ªsaè´¦å·</a></li><li><a href="#2ç¼–å†™rbacèµ„æºæˆæƒyamlæ–‡ä»¶" class="table-of-contents__link toc-highlight">2.ç¼–å†™rbacèµ„æºæˆæƒyamlæ–‡ä»¶</a></li><li><a href="#3ç¼–å†™nginx-podèµ„æºå¹¶ä½¿ç”¨saè´¦å·" class="table-of-contents__link toc-highlight">3.ç¼–å†™nginx podèµ„æºå¹¶ä½¿ç”¨saè´¦å·</a></li><li><a href="#4åˆ›å»ºæ‰€æœ‰èµ„æºå¹¶æŸ¥çœ‹" class="table-of-contents__link toc-highlight">4.åˆ›å»ºæ‰€æœ‰èµ„æºå¹¶æŸ¥çœ‹</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs Releases</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://agou-ops.cn/myDocs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Version 1.0<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://agou-ops.cn/myDocsv2" target="_blank" rel="noopener noreferrer" class="footer__link-item">Version 2.0<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://agou-ops.cn/myDocsv3" target="_blank" rel="noopener noreferrer" class="footer__link-item">Version 3.0<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://agou-ops.cn/myDocsv4" target="_blank" rel="noopener noreferrer" class="footer__link-item">â­ï¸Version 4.0<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://agou-ops.cn" target="_blank" rel="noopener noreferrer" class="footer__link-item">â­ï¸æˆ‘çš„åšå®¢<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/AGou-ops" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2023 AGou-ops' Documetation v4.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.769d471d.js"></script>
<script src="/assets/js/main.cfb3537f.js"></script>
</body>
</html>